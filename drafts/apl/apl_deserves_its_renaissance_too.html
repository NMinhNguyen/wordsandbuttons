<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>APL deserves its renaissance too</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <style>
body{
    margin: 0 0 0 0;
}

a {
    text-decoration: none;
}

h1 {
    padding-top: 32pt;
    font-size: 24pt;
    width: 600pt;
    text-align: left;
}

h2 {
    padding-top: 16pt;
    font-size: 20pt;
    width: 555pt;
    text-align: left;
}

p {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
}

.footer {
    margin-top: 64pt;
    padding-bottom: 32pt;
    font-family: sans-serif;
    font-size: 16pt;
    text-align: left;
}


.code_piece {
    font-family: monospace;
    padding-left: 4pt;
    padding-right: 4pt;
}

table {
    border-width: 0pt;
}

td {
    vertical-align: top;
    padding: 6pt 12pt 6pt 12pt;
    font-size: 16pt;
    border: 1px solid black;
    width: 505pt;
}

button{
    width: 248pt;
    height: 42pt;
    margin-left:4pt;
    margin-right:4pt;
    font-size: 16pt;
}

.comment {
    font-size: 12pt;
    text-align:center;
    font-family: sans-serif;
    padding-bottom: 24pt;
}
    </style>
    <script language="JavaScript">
function next(slides){
    var first_slide = document.getElementById(slides + "_" + 1);
    for(var i = 1; i < 9; ++i)
    {
        var this_slide = document.getElementById(slides + "_" + i);
        var next_slide = document.getElementById(slides + "_" + (i+1));
        if(this_slide)
            if(this_slide.style.display == "block")
                {
                this_slide.style.display = "none";
                if(next_slide)
                    next_slide.style.display = "block";
                else
                    first_slide.style.display = "block";
                return;
                }
    }
}
    </script>
  </head>
  <body>
    <center>
    <h1>
APL deserves its renaissance too
    </h1>
    <p>
This is the <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Game of Life</a> in APL.
    </p>
    <table><tr>
    <td>    
    <pre>
life←{↑1 ⍵∨.∧3 4=+/,¯1 0 1∘.⊖¯1 0 1∘.⌽⊂⍵}</pre>
    </td>
    </td></tr></table>
    <p>
I know, I know. I should have started with introduction, but doesn’t it introduce itself rather well? You can see for yourself that it’s ultimately concise, expressive and completely alien to all the mainstream computer languages.    
    </p>
    <p>
In fact, it didn’t originate as a computer language at all. It was proposed as a better notation for tensor algebra by Harvard mathematician Kenneth E. Iverson. It was meant to be written by hand on a blackboard to transfer mathematic ideas from one person to another.    
    </p>
    <p>
But due to its formality it turned up to be surprisingly good to transfer ideas from people to computers as well. It was made into a computer language in early 60-th, and these weird symbols like <b>↑</b> or <b>⌽</b> were not a problem at all, because every manufacturer had its own char-set at the time anyway. ASCII wasn’t yet even ratificated.    
    </p>
    <p>
Its popularity grown through the following years peaking in the 70th and decaying afterwards with the rise of BASIC based personal computing and C powered UNIX platform. It is still used in some niches, such as in financial sector, meaning people actually make money using APL up to this day. But what’s fascinating, the very first portable computer by IBM — IBM 5100 “a 50-lb package of interactive personal computing” — came 6 years before the IBM PC and with APL on board.    
    </p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Ibm5100_%282297950254%29.jpg" style="width: 529pt;"/>
    <p class="comment">
By Marcin Wichary from San Francisco, U.S.A. <br>([1]Uploaded by Partyzan_XXI) [<a href="https://creativecommons.org/licenses/by/2.0">CC BY 2.0</a>], via Wikimedia Commons
    </p>
    <p>
The secret of APL’s popularity is simple: learning all the alien symbols is one time investment, and expressiveness — the leverage you as programmer has over the computation — is for life.
    </p>
    <p>
And it’s not even that hard to learn the language in the first place. You might not believe it, but it’s one of the simplest languages ever. Here, let me show you how the Game of Life works.
    </p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/e/e5/Gospers_glider_gun.gif" style="width: 500px;"/>
    <p class="comment">
By Kieff [<a href="http://www.gnu.org/copyleft/fdl.html">GFDL</a> or <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA-3.0</a>], from Wikimedia Commons
    </p>    
    <p>
The left arrow is an assignment function and the brackets mark the function body. So this: <b>life←{...}</b> is simply a function definition.
    </p>
    <p>
In APL function arguments are tacit, meaning you don’t have to specify a name for every argument, you just know by convention, that the left argument is always <b>⍺</b> and the right is <b>⍵</b>. Doesn’t it mean that APL functions take at most two arguments? Not really. When you want to call C-like function like this: <i>foo(x, y, z)</i>, in APL terms you simply pass a tuple of 3 values. It’s still one <b>⍵</b> though.
    </p>
    <p>
Let’s run our life with some input. Let it be a planner. We’ll use a ⍴ function to form a 5x5 matrix out of a linear array.
    </p>
    
    <table><tr>
    <td>    
    <pre>
<span id="input_1" style="display:block"><b>1. Form the <i>in</i> variable as a 5x5 matrix</b>

    in ← 5 5 ⍴ 0 0 0 0 0 0 0 1 0 0 
0 0 0 1 0 0 1 1 1 0 0 0 0 0 0  





</span><span id="input_2" style="display:none"><b>2. Show the <i>in</i> variable</b>

    in

0 0 0 0 0
0 0 1 0 0
0 0 0 1 0
0 1 1 1 0
0 0 0 0 0</span></pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('input')">Next step</button>
    </p>

    <p>
In Game of Life this figure is called planner. Running <i>life</i> funtion on in will result in this:
    </p>
    <table><tr>
    <td>    
    <pre>
<span id="life_1" style="display:block"><b>1. Show the <i>in</i> variable</b>

    in

0 0 0 0 0
0 0 <b>1</b> 0 0
0 0 0 <b>1</b> 0
0 <b>1 1 1</b> 0
0 0 0 0 0
</span><span id="life_2" style="display:none"><b>2. Run <i>life</i> on <i>in</i></b>

    life in

0 0 0 0 0
0 0 0 0 0
0 <b>1</b> 0 <b>1</b> 0
0 0 <b>1 1</b> 0
0 0 <b>1</b> 0 0</span></pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('life')">Next step</button>
    </p>    
    <p>
The planner moves!
    </p>
    <p>
In APL what we would call operators are functions too. Things like <b>+</b>, <b>-</b>, <b>×</b> etc. The functions are executed from right to left one at the time. There is no precedence, all the functions are equal.
    </p>
    <p>
    </p>
    <p>
The first function of the <i>life</i>'s body would be <i>enclose</i>: <b>⊂</b>. What it does — it makes our 5x5 matrix input into a scalar containing 5x5 matrix.
    </p>
    <table><tr>
    <td>    
    <pre>
⊂ in

┌─────────┐
│0 0 0 0 0│
│0 0 1 0 0│
│0 0 0 1 0│
│0 1 1 1 0│
│0 0 0 0 0│
└─────────┘
    </pre>
    </td>
    </td></tr></table>
    <p>
The next one is a bit trickier. The next function is <i>rotate</i>: <b>⌽</b>. It rotates an array at given index.
    </p>
    <table><tr>
    <td>    
    <pre>
1 ⌽ 1 2 3

2 3 1

0 ⌽ 1 2 3

1 2 3

¯1 ⌽ 1 2 3

3 1 2
    </pre>
    </td>
    </td></tr></table>
    <p>
But it doesn’t go by itself. It is itself an argument for an <i>outer product operator</i>: <b>∘.</b> (in APL functions that take other functions as arguments are called operators).
    </p>
    <p>
And together they do this:
    </p>
    <table><tr>
    <td>    
    <pre>
¯1 0 1∘.⌽⊂in

┌─────────┬─────────┬─────────┐
│0 0 0 0 0│0 0 0 0 0│0 0 0 0 0│
│0 0 0 1 0│0 0 1 0 0│0 1 0 0 0│
│0 0 0 0 1│0 0 0 1 0│0 0 1 0 0│
│0 0 1 1 1│0 1 1 1 0│1 1 1 0 0│
│0 0 0 0 0│0 0 0 0 0│0 0 0 0 0│
└─────────┴─────────┴─────────┘
    </pre>
    </td>
    </td></tr></table>   
    <p>
The next function also goes with an operator. It’s <i>rotate first</i>: <b>⊖</b>. It works pretty much like rotate, but it rotates a nested array around the first level of “nestedness”.
    </p>
    <table><tr>
    <td>    
    <pre>
1 ⊖ in

0 0 1 0 0
0 0 0 1 0
0 1 1 1 0
0 0 0 0 0
0 0 0 0 0

0 ⊖ in

0 0 0 0 0
0 0 1 0 0
0 0 0 1 0
0 1 1 1 0
0 0 0 0 0

¯1 ⊖ in

0 0 0 0 0
0 0 0 0 0
0 0 1 0 0
0 0 0 1 0
0 1 1 1 0
    </pre>
    </td>
    </td></tr></table>
    <p>
With outer product operator and our previous result it goes like this:
    </p>
    <table><tr>
    <td>    
    <pre>
¯1 0 1∘.⊖¯1 0 1∘.⌽⊂in

┌─────────┬─────────┬─────────┐
│0 0 0 0 0│0 0 0 0 0│0 0 0 0 0│
│0 0 0 0 0│0 0 0 0 0│0 0 0 0 0│
│0 0 0 1 0│0 0 1 0 0│0 1 0 0 0│
│0 0 0 0 1│0 0 0 1 0│0 0 1 0 0│
│0 0 1 1 1│0 1 1 1 0│1 1 1 0 0│
├─────────┼─────────┼─────────┤
│0 0 0 0 0│0 0 0 0 0│0 0 0 0 0│
│0 0 0 1 0│0 0 1 0 0│0 1 0 0 0│
│0 0 0 0 1│0 0 0 1 0│0 0 1 0 0│
│0 0 1 1 1│0 1 1 1 0│1 1 1 0 0│
│0 0 0 0 0│0 0 0 0 0│0 0 0 0 0│
├─────────┼─────────┼─────────┤
│0 0 0 1 0│0 0 1 0 0│0 1 0 0 0│
│0 0 0 0 1│0 0 0 1 0│0 0 1 0 0│
│0 0 1 1 1│0 1 1 1 0│1 1 1 0 0│
│0 0 0 0 0│0 0 0 0 0│0 0 0 0 0│
│0 0 0 0 0│0 0 0 0 0│0 0 0 0 0│
└─────────┴─────────┴─────────┘
    </pre>
    </td>
    </td></tr></table>    
    <p>
The next function in called <i>ravel</i>: <b>,</b> and it does look like coma. What it does, it makes nested array into 1-dimensional.
    </p>
    <table><tr>
    <td>    
    <pre>
, in

0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 1 1 1 0 0 0 0 0 0
    </pre>
    </td>
    </td></tr></table>       
    <p>
It doesn’t ravel scalar, so being applied to our matrix of scalars containing matrices, it would make an array of 9 enclosed matrices.
    </p>
    <p>
The next one is again operator and function pair. Operator <i>reduce</i>: <b>/</b>, and a function <i>plus</i>: <b>+</b>. As you might guess, it reduces, as in map-reduce, a summation of all matrices in the array.
    </p>
    <table><tr>
    <td>    
    <pre>
+/,¯1 0 1∘.⊖¯1 0 1∘.⌽⊂in

┌─────────┐
│0 1 1 1 0│
│0 1 2 2 1│
│1 3 5 4 2│
│1 2 4 3 2│
│1 2 3 2 1│
└─────────┘
    </pre>
    </td>
    </td></tr></table> 
    <p>
Operator <i>compare</i>: <b>=</b> produces matrices of 0 and 1 based on whether every element in the right argument equals or not an every argument in the left argument. In our case this would result in:
    </p>
    <table><tr>
    <td>    
    <pre>
3 4 = +/,¯1 0 1∘.⊖¯1 0 1∘.⌽⊂in

┌─────────┬─────────┐
│0 0 0 0 0│0 0 0 0 0│
│0 0 0 0 0│0 0 0 0 0│
│0 1 0 0 0│0 0 0 1 0│
│0 0 0 1 0│0 0 1 0 0│
│0 0 1 0 0│0 0 0 0 0│
└─────────┴─────────┘
    </pre>
    </td>
    </td></tr></table> 
    <p>
Then there is logical part. Functions <i>or</i>: <b>∨</b> and <i>and</i>: <b>∧</b> used with the inner product . operator. With our input it results in an enclosed matrix where every 1 element of original input results in 1 only having 2 original neighbors, but also every element at all results in 1 having 3 neighbors nevertheless was it set to 1 in original input or not.
    </p>
    <p>
Which is basically the rules for the Game of Life.
    </p>
    <table><tr>
    <td>    
    <pre>
1 in∨.∧3 4=+/,¯1 0 1∘.⊖¯1 0 1∘.⌽⊂in

┌─────────┐
│0 0 0 0 0│
│0 0 0 0 0│
│0 1 0 1 0│
│0 0 1 1 0│
│0 0 1 0 0│
└─────────┘
    </pre>
    </td>
    </td></tr></table> 
    <p>
And the last function <i>mix</i> <b>↑</b> here simply removes enclosure.
    </p>
    <pre>
↑1 in∨.∧3 4=+/,¯1 0 1∘.⊖¯1 0 1∘.⌽⊂in

0 0 0 0 0
0 0 0 0 0
0 1 0 1 0
0 0 1 1 0
0 0 1 0 0
    </pre>
    </td>
    </td></tr></table>    
    <p>
Not so alien now, is it?
    </p>
    
    
    <table><tr>
    <td>    
    <pre>
<span id="slides_1" style="display:block">
1  

</span><span id="slides_2" style="display:none">   
2

</span><span id="slides_3" style="display:none">  
3

</span>
    </pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('slides')">Next step</button>
    </p>
    
    <p>
...
    </p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/9/9f/APL-keybd2.svg" style="width: 529pt;"/>
    <p class="comment">
By User:Rursus (APL-keybd.svg) [<a href="http://www.gnu.org/copyleft/fdl.html">GFDL</a> or <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA-3.0</a>], via Wikimedia Commons
    </p>
    <h2>
But why does it deserve its renaissance after all?
    </h2>
    <p>
It was designed to be written by hand. However for decades now it was only typed in with the keyboard. And the weird one, not the one you could just buy in any store. APL however has its ASCII friendly descendants inherited its expressiveness and concision, but frankly they are all ugly beyond the possibility of public success. It’s not that APL is alien to computers, it’s just computers were alien to APL for quite a while.
    </p>
    <p>
But now, with the development of touch interfaces and optical character recognition, it might just get its second chance. I would personally prefer drawing several rows of APL characters on a tablet to typing hundreds of lines in Python with a virtual ASCII keyboard.
    </p>

    <p class="footer">
There are more words and buttons on <a href="index.html">wordsandbuttons.online</a>.
    </p>
    </center>
  </body>
</html>
