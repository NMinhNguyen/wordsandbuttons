<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Challenge your performance intuition with C++ operators</title>
    <meta name="keywords" content="cpp,quiz,game,learning,c++">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <style>
body{
    margin: 0 0 0 0;
}

a{
    text-decoration: none;
}

h1 {
    padding-top: 32pt;
    font-size: 24pt;
    width: 600pt;
    text-align: left;
}

h2 {
    padding-top: 16pt;
    font-size: 20pt;
    width: 555pt;
    text-align: left;
}

p {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
}

.comment {
    font-size: 14pt;
    text-align:center;
    font-family: sans-serif;
    padding-bottom: 24pt;
}

table.footer {
    padding: 64pt 0pt 32pt 0pt;
    background-color: transparent;
    width: 505pt;
}

td.footer {
    font-family: sans-serif;
    font-size: 16pt;
    font-style: normal;
    padding: 0;
    margin: 0;
    border: 0;
}

pre {
    margin: 0 0 0 0;
    padding-top: 12pt;
    padding-left: 12pt;
    padding-right: 12pt;
    padding-bottom: 12pt;
    font-size: 12pt;
    text-align: left;
    width: 360pt;
}

.code {
    background-color: #ccccff;
}

.code_piece {
    background-color: #ccccff;
    font-family: monospace;
    padding-left: 4pt;
    padding-right: 4pt;
}


table {
    text-align: center;
    border-width: 0pt;
}

td {
    padding: 6pt 12pt 6pt 12pt;
    font-size: 16pt;
    border: 1px solid black;
}

button{
    width: 304pt;
    height: 42pt;
    margin-left:4pt;
    margin-right:4pt;
    font-size: 18pt;
}

    </style>
    <script language="JavaScript">
var slider_set = [false, false, false, false,  false, false, false, false,  false, false];
var slider_true_xs = [
    1.0 / (1.0 + 0.9) * 512,
    1.0 / (1.0 + 0.6) * 512,
    1.0 / (1.0 + 0.7) * 512,
    1.0 / (1.0 + 17.8) * 512,

    17.8 / (17.8 + 8.7) * 512,
    8.7 / (8.7 + 12.7) * 512,
    17.8 / (17.8 + 0.9) * 512,
    1.0 / (1.0 + 0.6) * 512
    ];
var slider_user_xs = [255, 255, 255, 255,  255, 255, 255, 255];
var slider_xs = [255, 255, 255, 255,  255, 255, 255, 255];

var slider_down = false;

function comment_on_slider(no){
    var left = document.getElementById("left_" + (no + 1));
    var right = document.getElementById("right_" + (no + 1));
    var x = slider_xs[no]
    var xl = x;
    var xr = 511 - x;
    if(x < 255){
        left.style.backgroundColor = "#" + (Math.round(xl)).toString(16) + "ff" + (Math.round(xl)).toString(16);
        right.style.backgroundColor = "#ff" + (Math.round(xl)).toString(16) + (Math.round(xl)).toString(16);
    }else{
        right.style.backgroundColor = "#" + (Math.round(xr)).toString(16) + "ff" + (Math.round(xr)).toString(16);
        left.style.backgroundColor = "#ff" + (Math.round(xr)).toString(16) + (Math.round(xr)).toString(16);
    }

    var comment = document.getElementById("comment_" + (no + 1));
    if(xl > xr){
        if(xl > 20*xr){
            comment.innerHTML = "Right is more than 20 times faster!";
        }else if(xl > 10*xr){
            comment.innerHTML = "Right is more than 10 times faster!";
        }else if(xl > 5*xr){
            comment.innerHTML = "Right is more than 5 times faster!";
        }else if(xl > 3*xr){
            comment.innerHTML = "Right is more than 3 times faster!";
        }else if(xl > 2*xr){
            comment.innerHTML = "Right is more than 2 times faster!";
        }else if(xl > 1.5*xr){
            comment.innerHTML = "Right is more than 50% faster.";
        }else if(xl > 1.25*xr){
            comment.innerHTML = "Right is more than 25% faster.";
        }else if(xl > 1.1*xr){
            comment.innerHTML = "Right is more than 10% faster.";
        }else{
            comment.innerHTML = "Right is slightly faster.";
        }
    }else if(xr > xl){
        if(xr > 20*xl){
            comment.innerHTML = "Left is more than 20 times faster!";
        }else if(xr > 10*xl){
            comment.innerHTML = "Left is more than 10 times faster!";
        }else if(xr > 5*xl){
            comment.innerHTML = "Left is more than 5 times faster!";
        }else if(xr > 3*xl){
            comment.innerHTML = "Left is more than 3 times faster!";
        }else if(xr > 2*xl){
            comment.innerHTML = "Left is more than 2 times faster!";
        }else if(xr > 1.5*xl){
            comment.innerHTML = "Left is more than 50% faster.";
        }else if(xr > 1.25*xl){
            comment.innerHTML = "Left is more than 25% faster.";
        }else if(xr > 1.1*xl){
            comment.innerHTML = "Left is more than 10% faster.";
        }else{
            comment.innerHTML = "Left is slightly faster.";
        }

    }else if(xl == xr){
        comment.innerHTML = "They are equally fast.";
    }
}

function position_slider(no, client_x){
    if(!slider_set[no]){
        var slider = document.getElementById("slider_" + (no + 1));
        var canvas_rect = slider.getBoundingClientRect();
        var x = client_x - canvas_rect.left - 48;
        if(x < 16)
            x = 16;
        if(x > 511 - 16)
            x = 511 - 16;
        slider_xs[no] = x;

        comment_on_slider(no);
    }
}

function init_slider(no){
    draw_slider(no);
    var slider = document.getElementById("slider_" + (no + 1));

    slider.addEventListener('mouseleave', function(e){
        slider_down = false;
    }, false);

    slider.addEventListener('mouseup', function(e){
        slider_down = false;
    }, false);

    slider.addEventListener('mousedown', function(e){
        slider_down = true;
        position_slider(no, e.clientX);
        draw_slider(no);
    }, false);

    slider.addEventListener('mousemove', function(e){
        if(slider_down){
            position_slider(no, e.clientX);
            draw_slider(no);
        }
    }, false);
}

function draw_slider(no){
    ctx = document.getElementById("slider_" + (no + 1)).getContext("2d");
    x = slider_xs[no] + 48 + 0.5;

    ctx.clearRect(0, 0, 608, 128);
	ctx.beginPath();
	ctx.moveTo(64.5-16, 32.5);
	ctx.lineTo(0.5 + 16, 127.5 - 32);
	ctx.lineTo(607.5 - 16, 127.5 - 32);
	ctx.lineTo(607.5 - 64 + 16, 32.5);
    ctx.lineTo(64.5-16, 32.5);
	ctx.strokeStyle="#000000";
    ctx.stroke();
    ctx.closePath();
    ctx.fillStyle="#999999";
  	ctx.fill();

	if(slider_set[no]){
    	x_red = slider_user_xs[no] + 48 + 0.5;
	    ctx.beginPath();
	    ctx.moveTo(x_red, 0);
	    ctx.lineTo(x_red - 64, 127);
	    ctx.lineTo(x_red + 64, 127);
	    ctx.lineTo(x_red, 0);
	    ctx.strokeStyle="#660000";
        ctx.stroke();
        ctx.closePath();
        ctx.fillStyle="#ffcccc";
    	ctx.fill();
    }

  	ctx.beginPath();
	ctx.moveTo(x, 0);
	ctx.lineTo(x - 64, 127);
	ctx.lineTo(x + 64, 127);
	ctx.lineTo(x, 0);
	ctx.strokeStyle="#000000";
    ctx.stroke();
    ctx.closePath();
    ctx.fillStyle="#cccccc";
  	ctx.fill();
}

function reveal(no){
    slider_set[no] = true;
    slider_user_xs[no] = slider_xs[no];
    slider_xs[no] = slider_true_xs[no];
    draw_slider(no);
    comment_on_slider(no);
    document.getElementById("the_truth_" + (no + 1)).style.display = "block";
    document.getElementById("button_" + (no + 1)).style.display = "none";

    for(var i = 0; i < 8; i++){
        if(slider_set[i] == false)
            return;
    }

    document.getElementById("show_in_the_end").style.display = "block";
    var score = 0;
    var default_score = 0;
    for(var i = 0; i < 8; i++){
        score += Math.abs(slider_user_xs[i] - slider_xs[i]);
        default_score += Math.abs(255 - slider_xs[i]);
    }

    document.getElementById("score").innerHTML = "<b>" + score.toFixed(0) + "</b>";
    document.getElementById("default_score").innerHTML = "<b>" + default_score.toFixed(0) + "</b>";
}
    </script>
  </head>
  <body>
    <center>
    <h1>
Challenge your performance intuition with C++ operators
    </h1>
    <p>
I made a mistake. More of a typo really, I wrote “bitwise and” instead of “logical and” operator. A coleague of mine noticed that during the code review and said something like this. “You shouldn't use bitwise operators instead of logical ones, the latter do <a href="https://en.wikipedia.org/wiki/Short-circuit_evaluation">short-circuiting</a>.”
    </p>
    <p>
Both pieces of the sentence are valid. You shouldn't use bitwise operators instead of logical ones. Logical operators in C++ do perform short-circuit evaluation. That's true. But the invisible implication between the two pieces is wrong. It's much more complicated than that.
    </p>
    <p>
Short-circuiting may be or may be not benefitial to the perfromance. It may or may be not perfromed on bitwise operators. And sometimes you're better off without doing logic the most logical way.
    </p>
    <p>
I want to propose a game. Let's measure stuff and see if we can predict the measurements before they come. We did <a href="https://wordsandbuttons.online/challenge_your_performance_intuition_with_cpp_magic_squares.html">a similar thing</a> last year, and that was fun so why not?
    </p>
    <p>
So here is the benchmark example.
    </p>
    <table><tr>
    <td>
    <pre style="width: 505pt;">
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using <b>TheType</b> = int;
  constexpr auto <b>TheSize</b> = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;<b>TheType</b>&gt; distribution(0, 1);
  std::vector&lt;<b>TheType</b>&gt; xs(<b>TheSize</b>);
  for (auto& digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  <b>for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 && xs[i+1] == 1 && xs[i+2] == 1 && xs[i+3] == 1)
      four_1_in_a_row++;</b>
  auto end = std::chrono::system_clock::now();
    
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}</pre>
    </td></tr></table>
    <p>
Using your intuition and best judgment, please estimate their <i>relative</i> effectiveness. Use the slider below the code samples.
    </p>
    <p class="comment">
Times are measured on Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz. <br>All the code compiled with clang 3.8.0-2ubuntu4 -std=c++14 -O2.
    </p>


    <h2>
Round 1. && vs &
    </h1>
    <p>
...
    </p>
    <table><tr>
    <td id="left_1">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 && xs[i+1] == 1 && xs[i+2] == 1 && xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td>
    <td id="right_1">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 & xs[i+1] == 1 & xs[i+2] == 1 & xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td></tr></table>
    <canvas id="slider_1" width=608 height=128></canvas>
    <p class="comment" id="comment_1">
They are equally fast.
    </p>
    <button type="button" onclick="reveal(0)" id="button_1">Reveal the truth</button>
    <div id="the_truth_1" style="display:none;">
    <p>
The truth
    </p>
    </div>
    <script language="JavaScript">
    init_slider(0);
    </script>

    <h2>
Round 2. & vs *
    </h1>
    <p>
...
    </p>
    <table><tr>
    <td id="left_2">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 & xs[i+1] == 1 & xs[i+2] == 1 & xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td>
    <td id="right_2">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if((xs[i] == 1) * (xs[i+1] == 1) * (xs[i+2] == 1) * (xs[i+3] == 1))
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td></tr></table>
    <canvas id="slider_2" width=608 height=128></canvas>
    <p class="comment" id="comment_2">
They are equally fast.
    </p>
    <button type="button" onclick="reveal(1)" id="button_2">Reveal the truth</button>
    <div id="the_truth_2" style="display:none;">
    <p>
The truth
    </p>
    </div>
    <script language="JavaScript">
    init_slider(1);
    </script>

    <h2>
Round 3. ==, && vs *, +, - 
    </h1>
    <p>
...
    </p>
    <table><tr>
    <td id="left_3">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 && xs[i+1] == 1 && xs[i+2] == 1 && xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td>
    <td id="right_3">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

inline int sq(int x) {
  return x*x;
}

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(sq(xs[i] - 1)
     + sq(xs[i+1] - 1)
     + sq(xs[i+2] - 1) 
     + sq(xs[i+3] - 1) == 0)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td></tr></table>
    <canvas id="slider_3" width=608 height=128></canvas>
    <p class="comment" id="comment_3">
They are equally fast.
    </p>
    <button type="button" onclick="reveal(2)" id="button_3">Reveal the truth</button>
    <div id="the_truth_3" style="display:none;">
    <p>
The truth
    </p>
    </div>
    <script language="JavaScript">
    init_slider(2);
    </script>

    <h2>
Round 4. * vs abs
    </h1>
    <p>
...
    </p>
    <table><tr>
    <td id="left_4">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

inline int sq(int x) {
  return x*x;
}

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(sq(xs[i] - 1)
     + sq(xs[i+1] - 1)
     + sq(xs[i+2] - 1) 
     + sq(xs[i+3] - 1) == 0)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td>
    <td id="right_4">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;


int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(std::abs(xs[i] - 1) 
     + std::abs(xs[i+1] - 1) 
     + std::abs(xs[i+2] - 1) 
     + std::abs(xs[i+3] - 1) == 0)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td></tr></table>
    <canvas id="slider_4" width=608 height=128></canvas>
    <p class="comment" id="comment_4">
They are equally fast.
    </p>
    <button type="button" onclick="reveal(3)" id="button_4">Reveal the truth</button>
    <div id="the_truth_4" style="display:none;">
    <p>
The truth
    </p>
    </div>
    <script language="JavaScript">
    init_slider(3);
    </script>
    
    <h2>
Round 5. int vs double
    </h1>
    <p>
...
    </p>
    <table><tr>
    <td id="left_5">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 && xs[i+1] == 1 && xs[i+2] == 1 && xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td>
    <td id="right_5">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = double;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;int&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = static_cast&lt;TheType&gt;(distribution(rng));
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 && xs[i+1] == 1 && xs[i+2] == 1 && xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td></tr></table>
    <canvas id="slider_5" width=608 height=128></canvas>
    <p class="comment" id="comment_5">
They are equally fast.
    </p>
    <button type="button" onclick="reveal(4)" id="button_5">Reveal the truth</button>
    <div id="the_truth_5" style="display:none;">
    <p>
The truth
    </p>
    </div>
    <script language="JavaScript">
    init_slider(4);
    </script>
    
    <h2>
Round 6. ==, && vs *, +, - but all in double
    </h1>
    <p>
...
    </p>
    <table><tr>
    <td id="left_6">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = double;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;int&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = static_cast&lt;TheType&gt;(distribution(rng));
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 && xs[i+1] == 1 && xs[i+2] == 1 && xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td>
    <td id="right_6">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

double sq(double x) {
  return x*x;
}

int main() {
  using TheType = double;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;int&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = static_cast&lt;TheType&gt;(distribution(rng));
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(sq(xs[i] - 1) 
     + sq(xs[i+1] - 1)
     + sq(xs[i+2] - 1)
     + sq(xs[i+3] - 1) == 0)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td></tr></table>
    <canvas id="slider_6" width=608 height=128></canvas>
    <p class="comment" id="comment_6">
They are equally fast.
    </p>
    <button type="button" onclick="reveal(5)" id="button_6">Reveal the truth</button>
    <div id="the_truth_6" style="display:none;">
    <p>
The truth
    </p>
    </div>
    <script language="JavaScript">
    init_slider(5);
    </script>    

    <h2>
Round 7. double vs float
    </h1>
    <p>
...
    </p>
    <table><tr>
    <td id="left_7">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = double;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;int&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = static_cast&lt;TheType&gt;(distribution(rng));
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 && xs[i+1] == 1 && xs[i+2] == 1 && xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td>
    <td id="right_7">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = float;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;int&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = static_cast&lt;TheType&gt;(distribution(rng));
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 && xs[i+1] == 1 && xs[i+2] == 1 && xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td></tr></table>
    <canvas id="slider_7" width=608 height=128></canvas>
    <p class="comment" id="comment_7">
They are equally fast.
    </p>
    <button type="button" onclick="reveal(6)" id="button_7">Reveal the truth</button>
    <div id="the_truth_7" style="display:none;">
    <p>
The truth
    </p>
    </div>
    <script language="JavaScript">
    init_slider(6);
    </script> 

    <h2>
Round 8. 1 vs 0
    </h1>
    <p>
...
    </p>
    <table><tr>
    <td id="left_8">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_1_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 1 && xs[i+1] == 1 && xs[i+2] == 1 && xs[i+3] == 1)
      four_1_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  1111s: " &lt;&lt; four_1_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td>
    <td id="right_8">
    <pre>
#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;random&gt;
#include &lt;array&gt;

int main() {
  using TheType = int;
  constexpr auto TheSize = 16 * 10000000;
  std::mt19937 rng(0);
  std::uniform_int_distribution&lt;TheType&gt; distribution(0, 1);
  std::vector&lt;TheType&gt; xs(TheSize);
  for (TheType &digit : xs) {
    digit = distribution(rng);
  }
   
  volatile auto four_0_in_a_row = 0u;
  auto start = std::chrono::system_clock::now();
  for (auto i = 0u; i &lt; TheSize - 3; i += 1)
    if(xs[i] == 0 && xs[i+1] == 0 && xs[i+2] == 0 && xs[i+3] == 0)
      four_0_in_a_row++; 
  auto end = std::chrono::system_clock::now();
  
  std::cout &lt;&lt; "time: " &lt;&lt; (end-start).count() * 1e-9  
    &lt;&lt; "  0000s: " &lt;&lt; four_0_in_a_row &lt;&lt; "\n";
}
    </pre>
    </td></tr></table>
    <canvas id="slider_8" width=608 height=128></canvas>
    <p class="comment" id="comment_8">
They are equally fast.
    </p>
    <button type="button" onclick="reveal(7)" id="button_8">Reveal the truth</button>
    <div id="the_truth_8" style="display:none;">
    <p>
The truth
    </p>
    </div>
    <script language="JavaScript">
    init_slider(7);
    </script> 

    <div id="show_in_the_end" style="display:none;">
    <h2>
Congratulations!
    </h2>
    <p>
You scored <span id="score"></span> pixels of error. As a reference, if you leave every answer untouched as “exactly equal”, there is <span id="default_score"></span> pixels of error.
    </p>
    </div>

    <h2>
Conclusion
    </h2>
    <p>
...
    </p>


    <table class="footer" style="width: 555pt; padding: 64pt 0pt 32pt 0pt; background-color: transparent; font-family: sans-serif; font-size: 16pt; font-style: normal;">
    <tr>
    <td class="footer" style="vertical-align: middle; text-align: left; width: 64px; padding: 0; margin: 0; border: 0;">
        <a href="index.html"><img src="favicon.ico"></a> 
    </td>
    <td class="footer" style="vertical-align: middle; text-align: left; width: 200pt; padding: 0; margin: 0; border: 0;">
        &nbsp;&larr; there's more.
    </td>
    <td class="footer" style="vertical-align: middle; text-align: right; width: 300pt; padding: 0; margin: 0; border: 0;">
        + 
        <a href="https://github.com/akalenuk/wordsandbuttons">Github</a> & 
        <a href="https://twitter.com/wordsandbuttons">Twitter</a> & 
        <a href="https://news.ycombinator.com/from?site=wordsandbuttons.online">Hacker News</a>
    </td>
    </tr>
    </table>
    </center>
  </body>
</html>
