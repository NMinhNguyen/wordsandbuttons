<HTML> 
<HEAD> 
    <TITLE>Polynomial demo</TITLE> 
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html;charset=UTF-8"> 
    <META HTTP-EQUIV="KEYWORDS" CONTENT="canvas testing"> 
    <LINK REV="MAIL:" HREF="mailto:akalenuk@gmail.com"> 
</HEAD> 
<BODY topmargin=0 leftmargin=0 marginwidth=0 marginheight=0> 
    <canvas id='teca' width=512 height=512 style="float: left;"></canvas> 
    <script language="JavaScript"> 
    <!--	

	function solve_SLAE(_A, _B){
		var _N=_B.length;
		var _X=new Array();
		
		function a(i, j, n){
			if(n==_N){
				return _A[i][j];
			}else{
				return a(i,j,n+1)*a(n,n,n+1)-a(i,n,n+1)*a(n,j,n+1);
			}
		}

		function b(i,n){
			if(n==_N){
				return _B[i];
			}else{
				return a(n,n,n+1)*b(i,n+1)-a(i,n,n+1)*b(n,n+1);
			}
		}

		function x(i){
			var d=b(i,i+1);
			for(var j=0; j<i; j++){
				d-=a(i,j,i+1)*_X[j];
			}
			return d/a(i,i,i+1);
		}

		for(var k=0; k<_N; k++){
			_X[k]=x(k);
		}
		return _X;
	}


	// sample
	var Xs = new Array( 100, 256, 400);
	var Ys = new Array(100, 300, 200);
	var N=Xs.length;
	if(Ys.length!=N){
		alert("Ys.length!=Xs.length");
	}

	var A = new Array();
	var B = new Array();

	for(var i=0; i<N; i++){
		var Ai=new Array();
		for(var j=0; j<N; j++){
			Ai[j]=Math.pow(i, j);
		}
		A[i]=Ai;
		B[i]=Xs[i];
	}
	var a5x=solve_SLAE(A, B);

	for(var i=0; i<N; i++){
		var Ai=new Array();
		for(var j=0; j<N; j++){
			Ai[j]=Math.pow(i, j);
		}
		A[i]=Ai;
		B[i]=Ys[i];
	}
	var a5y=solve_SLAE(A, B);



	var teca = document.getElementById("teca");
	var teca_context = teca.getContext("2d");      
	teca_context.fillStyle="#eeeeee";
	teca_context.fillRect(0,0,512,512);
 	teca_context.beginPath();
	var _100=100;
	for(var i=0; i<=(N-1)*_100; i++){
		var X=0;
		var Y=0;
		for(var j=0; j<N; j++){
			X+=a5x[j]*Math.pow(i/_100,j);
			Y+=a5y[j]*Math.pow(i/_100,j);
		}
		if(i==0){
			teca_context.moveTo(X,Y);
		}else{
			teca_context.lineTo(X,Y);
		}
	}
        teca_context.strokeStyle="#000000";
        teca_context.stroke();



        for(var i=0; i<N; i++){
		var Ai=new Array();
		for(var j=0; j<2*N; j++){
			Ai[j]=Math.pow(i, j);
		}
		A[i]=Ai;
		B[i]=Xs[i];
	}
        for(var i=N; i<2*N; i++){
		var Ai=new Array();
		var li=i-N;
		for(var j=0; j<2*N; j++){
			if(j==0){
				Ai[j]=0;
			}else{
				Ai[j]=li*Math.pow(li+0.0001, j-1)+0.00001;
			}
		}
		A[i]=Ai;
		B[i]=0;
		for(var j=1; j<N; j++){
			B[i]+=j*a5x[j]*Math.pow(li+0.0001,(j-1));
		}
	}
	var a10x=solve_SLAE(A,B);


        for(var i=0; i<N; i++){
		var Ai=new Array();
		for(var j=0; j<2*N; j++){
			Ai[j]=Math.pow(i, j);
		}
		A[i]=Ai;
		B[i]=Ys[i];
	}
        for(var i=N; i<2*N; i++){
		var Ai=new Array();
		var li=i-N;
		for(var j=0; j<2*N; j++){
			if(j==0){
				Ai[j]=0;
			}else{
				Ai[j]=li*Math.pow(li+0.0001, j-1)+0.0001;
			}
		}
		A[i]=Ai;
		B[i]=0;
		for(var j=1; j<N; j++){
			B[i]+=j*a5y[j]*Math.pow(li+0.0001,(j-1));
		}
	}
	var a10y=solve_SLAE(A, B);




 	teca_context.beginPath();
	var _100=100;
	for(var i=0; i<=(N-1)*_100; i++){
		var X=0;
		var Y=0;
		for(var j=0; j<2*N; j++){
			X+=a10x[j]*Math.pow(i/_100,j);
			Y+=a10y[j]*Math.pow(i/_100,j);
		}
		if(i==0){
			teca_context.moveTo(X,Y);
		}else{
			teca_context.lineTo(X,Y);
		}
	}
        teca_context.strokeStyle="#008800";
        teca_context.stroke();



	// carcasus
 	teca_context.beginPath();
	for(var i=0; i<N; i++){
		teca_context.moveTo(Xs[i],Ys[i]);
		teca_context.lineTo(Xs[i]-3,Ys[i]-3);
		teca_context.moveTo(Xs[i],Ys[i]);
		teca_context.lineTo(Xs[i]-3,Ys[i]+3);
		teca_context.moveTo(Xs[i],Ys[i]);
		teca_context.lineTo(Xs[i]+3,Ys[i]+3);
		teca_context.moveTo(Xs[i],Ys[i]);
		teca_context.lineTo(Xs[i]+3,Ys[i]-3);
	}
        teca_context.strokeStyle="#EE0000";
        teca_context.stroke();




	

    // -->
    </script>  
</BODY> 