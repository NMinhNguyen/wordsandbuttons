<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Yet another floating point tutorial</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <style>
body{
    margin: 0 0 0 0;
}

a{
    text-decoration: none;
}

h1 {
    padding-top: 32pt;
    font-size: 24pt;
    width: 600pt;
    text-align: left;
}

h2 {
    padding-top: 16pt;
    font-size: 20pt;
    width: 555pt;
    text-align: left;
}

p {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
}

.comment {
    font-size: 12pt;
    text-align:center;
    font-family: sans-serif;
    padding-bottom: 24pt;
}

.formula {
    font-family: sans-serif;
    font-size: 15pt;
    font-style: italic;
    text-align: center;
    padding-top: 6pt;
    padding-bottom: 6pt;
}

.footer {
    margin-top: 64pt;
    padding-bottom: 32pt;
    font-family: sans-serif;
    font-size: 16pt;
    text-align: left;
}

table {
    font-family: sans-serif;
    font-size: 13pt;
    font-style: italic;
    width: 505pt;
    text-align: center;
}

th {
    vertical-align: text-top;
    padding-top: 6pt;
    padding-bottom: 6pt;
    font-style: bold;
}

td {
    vertical-align: text-top;
    padding-top: 6pt;
    padding-bottom: 6pt;
}

li {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
    padding-bottom: 6pt;
}

form {
    margin: 0 0 0 0;
    padding-top: 12pt;
    padding-left: 12pt;
    padding-right: 12pt;
    padding-bottom: 12pt;
    font-size: 16pt;
    text-align: left;
    width: 505pt;
    background-color: #eeee99;
}

input[type="text"] {
    width: 84pt;
    height: 22pt;
    font-size: 16pt;
    text-align: right;
}

button {
    width: 32pt;
    height: 26pt;
    font-size: 16pt;
    text-align: center;
}

select {
    width: 84pt;
    height: 26pt;
    font-size: 16pt;
    text-align: center;
}

pre {
    font-style: normal;
    text-align: left;
    font-size: 16pt;
}

.colored1 {
    font-weight: bold;
    color: #d64562;
}

.colored2 {
    font-weight: bold;
    color: #457fd6;
}
    </style>
    <script language="JavaScript">
const w = 640;
const h = 200;    
const cell_width = 64;    
const cell_height = 64;
const cell_y = 20;

const button_border = "#999";
const button_shadow = "#444";
    
// integer point
integer_cell_xs = [20, 20 + 90 + 43, 20 + 90*2 + 43 + 11, 20 + 90*3 + 43 + 11*2, 20 + 90*4 + 43 + 11*3, 20 + 90*5 + 43 + 11*4];
integer_cell_colors = ["#dba0ac", "#cfa0db", "#cfa0db", "#cfa0db", "#cfa0db", "#cfa0db"];
integer_cell_bits = [0, 0, 0, 1, 1, 0];

function init_integer() {
    var integer = document.getElementById("integer");
    integer_draw();
    
    integer.addEventListener('mousedown', function(e){
        var canvas_rect = integer.getBoundingClientRect();
        var x = e.clientX - canvas_rect.left;
        var y = e.clientY - canvas_rect.top;
        for(var i = 0; i < integer_cell_xs.length; ++i) {
            if (x > integer_cell_xs[i] && x < integer_cell_xs[i] + cell_width && y > cell_y && y < cell_y + cell_height)
                integer_cell_bits[i] = 1 - integer_cell_bits[i];
        }
        integer_draw('down', x, y);
    }, false);
    
    integer.addEventListener('mouseup', function(e){
        var canvas_rect = integer.getBoundingClientRect();
        var x = e.clientX - canvas_rect.left;
        var y = e.clientY - canvas_rect.top;    
        integer_draw('up', x, y);
    }, false);
}

function integer_draw(mouse_state, x, y) {
    var integer = document.getElementById("integer");
    var context = integer.getContext("2d");

    // background
    context.fillStyle="#dbd5a0";
    context.fillRect(0, 0, w, h);
    
    // cells
    for(var i = 0; i < integer_cell_xs.length; ++i) {
        var text_dx = 0;
        var text_dy = 0;
        if(mouse_state == "down" 
        && x >= integer_cell_xs[i] && x - integer_cell_xs[i] < cell_width 
        && y >= cell_y && y - cell_y < cell_height) {
            context.fillStyle = button_shadow;
            context.fillRect(integer_cell_xs[i] -1 , cell_y - 1, cell_width + 2, cell_height + 2);
            context.fillStyle = button_border;
            context.fillRect(integer_cell_xs[i], cell_y, cell_width + 1, cell_height + 2);
            text_dx = 1;
            text_dy = 1;
        } else {
            context.fillStyle = button_border;
            context.fillRect(integer_cell_xs[i] -1 , cell_y - 1, cell_width + 1, cell_height + 1);
            context.fillStyle = button_shadow;
            context.fillRect(integer_cell_xs[i], cell_y, cell_width + 1, cell_height + 1);                   
        }
        context.fillStyle = integer_cell_colors[i];
        context.fillRect(integer_cell_xs[i], cell_y, cell_width, cell_height);
        
        context.textAlign = "center";
        context.textBaseline = "middle"; 
        context.font = "48px sans-serif";
        context.fillStyle = "#222222";        
        context.fillText(integer_cell_bits[i], text_dx + integer_cell_xs[i] + cell_width / 2.0, text_dx + cell_y + cell_height / 2.0 + 4);   
    }
    
    // the number
    var sign = integer_cell_bits[0] ? -1.0 : 1.0;    
    var n = integer_cell_bits[5] + 2*integer_cell_bits[4] + 4*integer_cell_bits[3] + 8*integer_cell_bits[2] + 16*integer_cell_bits[1];
    if(sign == -1.0)
      n = 32 - n;
    
    // comment
    context.fillStyle = "#914853"
    context.textAlign = "left";
    context.textBaseline = "alphabetic"; 
    context.font = "20px sans-serif";
    context.fillText(sign == -1.0 ? "Negative number" : "Positive number", 20, 120);
    context.fillText("which is " + sign * n + ".", 20, 170);
    
    context.fillStyle = "#673670";
    context.fillText("of " + n + " things,", 20, 145);
}

// fixed point
fixed_cell_xs = [20, 20 + 90 + 43, 20 + 90*2 + 43, 20 + 90*3 + 43, 20 + 90*4 + 43*2, 20 + 90*5 + 43*2];
fixed_cell_colors = ["#dba0ac", "#cfa0db", "#cfa0db", "#cfa0db", "#cfa0db", "#cfa0db"];
fixed_cell_bits = [0, 0, 0, 1, 1, 0];

function init_fixed() {
    var fixed = document.getElementById("fixed");
    fixed_draw();
    
    fixed.addEventListener('mousedown', function(e){
        var canvas_rect = fixed.getBoundingClientRect();
        var x = e.clientX - canvas_rect.left;
        var y = e.clientY - canvas_rect.top;
        for(var i = 0; i < fixed_cell_xs.length; ++i) {
            if (x > fixed_cell_xs[i] && x < fixed_cell_xs[i] + cell_width && y > cell_y && y < cell_y + cell_height)
                fixed_cell_bits[i] = 1 - fixed_cell_bits[i];
        }
        fixed_draw('down', x, y);
    }, false);
    
    fixed.addEventListener('mouseup', function(e){
        var canvas_rect = fixed.getBoundingClientRect();
        var x = e.clientX - canvas_rect.left;
        var y = e.clientY - canvas_rect.top;    
        fixed_draw('up', x, y);
    }, false);
}

function fixed_draw(mouse_state, x, y) {
    var fixed = document.getElementById("fixed");
    var context = fixed.getContext("2d");

    // background
    context.fillStyle="#dbd5a0";
    context.fillRect(0, 0, w, h);
    
    // cells
    for(var i = 0; i < fixed_cell_xs.length; ++i) {
        var text_dx = 0;
        var text_dy = 0;
        if(mouse_state == "down" 
        && x >= fixed_cell_xs[i] && x - fixed_cell_xs[i] < cell_width 
        && y >= cell_y && y - cell_y < cell_height) {
            context.fillStyle = button_shadow;
            context.fillRect(fixed_cell_xs[i] -1 , cell_y - 1, cell_width + 2, cell_height + 2);
            context.fillStyle = button_border;
            context.fillRect(fixed_cell_xs[i], cell_y, cell_width + 1, cell_height + 2);
            text_dx = 1;
            text_dy = 1;
        } else {
            context.fillStyle = button_border;
            context.fillRect(fixed_cell_xs[i] -1 , cell_y - 1, cell_width + 1, cell_height + 1);
            context.fillStyle = button_shadow;
            context.fillRect(fixed_cell_xs[i], cell_y, cell_width + 1, cell_height + 1);                   
        }    
        context.fillStyle = fixed_cell_colors[i];
        context.fillRect(fixed_cell_xs[i], cell_y, cell_width, cell_height);
        
        context.textAlign = "center";
        context.textBaseline = "middle"; 
        context.font = "48px sans-serif";
        context.fillStyle = "#222222";        
        context.fillText(fixed_cell_bits[i], text_dx + fixed_cell_xs[i] + cell_width / 2.0, text_dy + cell_y + cell_height / 2.0 + 4);
    }
    
    // the number
    var sign = fixed_cell_bits[0] ? -1.0 : 1.0;    
    var n = fixed_cell_bits[5] + 2*fixed_cell_bits[4] + 4*fixed_cell_bits[3] + 8*fixed_cell_bits[2] + 16*fixed_cell_bits[1];
    if(sign == -1.0)
        n = 32 - n;
    
    // explicit point
    context.fillStyle = "#597052";
    context.fillText(".", 430, cell_y + cell_height / 2.0 + 4);
    
    // comment
    context.fillStyle = "#914853"
    context.textAlign = "left";
    context.textBaseline = "alphabetic"; 
    context.font = "20px sans-serif";
    context.fillText(sign == -1.0 ? "Negative number" : "Positive number", 20, 120);

    context.fillStyle = "#673670"
    context.fillText("of " + n + " quarters,", 20, 145);
    context.fillText("which is " + sign * (n / 4.0).toFixed(2) + " in real numbers.", 20, 170);
}

// floating point
floating_cell_xs = [20, 20 + 90 + 43 - 32, 20 + 90*2 + 43 - 32, 20 + 90*3 + 43 - 32, 20 + 90*4 + 43*2, 20 + 90*5 + 43*2];
floating_cell_colors = ["#dba0ac", "#acdba0", "#acdba0", "#acdba0", "#cfa0db", "#cfa0db"];
floating_cell_bits = [0, 0, 0, 1, 1, 0];

function init_floating() {
    var floating = document.getElementById("floating");
    floating_draw();
    
    floating.addEventListener('mousedown', function(e){
        var canvas_rect = floating.getBoundingClientRect();
        var x = e.clientX - canvas_rect.left;
        var y = e.clientY - canvas_rect.top;
        for(var i = 0; i < floating_cell_xs.length; ++i) {
            if (x > floating_cell_xs[i] && x < floating_cell_xs[i] + cell_width && y > cell_y && y < cell_y + cell_height)
                floating_cell_bits[i] = 1 - floating_cell_bits[i];
        }
        floating_draw('down', x, y);
    }, false);
    
    floating.addEventListener('mouseup', function(e){
        var canvas_rect = floating.getBoundingClientRect();
        var x = e.clientX - canvas_rect.left;
        var y = e.clientY - canvas_rect.top;    
        floating_draw('up', x, y);
    }, false);
}

function floating_draw(mouse_state, x, y) {
    var floating = document.getElementById("floating");
    var context = floating.getContext("2d");

    // background
    context.fillStyle="#dbd5a0";
    context.fillRect(0, 0, w, h);
    
    // cells
    for(var i = 0; i < floating_cell_xs.length; ++i) {
        var text_dx = 0;
        var text_dy = 0;
        if(mouse_state == "down" 
        && x >= floating_cell_xs[i] && x - floating_cell_xs[i] < cell_width 
        && y >= cell_y && y - cell_y < cell_height) {
            context.fillStyle = button_shadow;
            context.fillRect(floating_cell_xs[i] -1 , cell_y - 1, cell_width + 2, cell_height + 2);
            context.fillStyle = button_border;
            context.fillRect(floating_cell_xs[i], cell_y, cell_width + 1, cell_height + 2);
            text_dx = 1;
            text_dy = 1;
        } else {
            context.fillStyle = button_border;
            context.fillRect(floating_cell_xs[i] -1 , cell_y - 1, cell_width + 1, cell_height + 1);
            context.fillStyle = button_shadow;
            context.fillRect(floating_cell_xs[i], cell_y, cell_width + 1, cell_height + 1);                   
        }        
        context.fillStyle = floating_cell_colors[i];
        context.fillRect(floating_cell_xs[i], cell_y, cell_width, cell_height);
        
        context.textAlign = "center";
        context.textBaseline = "middle"; 
        context.font = "48px sans-serif";
        context.fillStyle = "#222222";        
        context.fillText(floating_cell_bits[i], text_dx + floating_cell_xs[i] + cell_width / 2.0, text_dy + cell_y + cell_height / 2.0 + 4);
    }
    
    // the number
    var sign = floating_cell_bits[0] ? -1.0 : 1.0;
    var e = floating_cell_bits[3] + floating_cell_bits[2] * 2 + floating_cell_bits[1] * 4;
    var n = floating_cell_bits[5] + floating_cell_bits[4] * 2 + ((e != 0 && e != 7) ? 4 : 0);
    
    // explicit point
    if (e != 0 && e != 7) {
        context.fillStyle = "#673670";
        context.fillText("1", 420, cell_y + cell_height / 2.0 + 4);    
    }
    
    // comment
    context.textAlign = "left";
    context.textBaseline = "alphabetic"; 
    context.font = "20px sans-serif";
            
    if( e == 7 ) {
        if ( n == 0 ) {
            context.fillStyle = "#914853";
            context.fillText(sign == -1.0 ? "Negative" : "Positive", 20, 120);
            context.fillStyle = "#673670";
            context.fillText("infinite number.", 20, 145);
        } else {
            context.fillStyle = "#673670";
            context.fillText("Not a number.", 20, 120);
        }
    } else {
        context.fillStyle = "#914853";
        context.fillText(sign == -1.0 ? "Negative number" : "Positive number", 20, 120);
        
        context.fillStyle = "#673670"
        context.fillText("of " + n, 20, 145);
        context.fillStyle = "#597052";
        var measures = "quarters,";
        if(e == 2)
            measures = "halves,";
        if(e == 3)
            measures = "wholes,";
        if(e == 4)
            measures = "pairs,";
        if(e == 5)
            measures = "four-packs,";
        if(e == 6)
            measures = "eight-packs,";
        context.fillText(measures, 64, 145);
        
        context.fillStyle = "#673670"
        context.fillText("which is " + sign * (n * Math.pow(2, e - 2 - (e > 0 ? 1 : 0))).toFixed(2) + " in real numbers", 20, 170);
    }
}

// numeric table: binary, fixed point, floating point
const all_6_bit_numbers = [
    ["000000", "0.00", "0"], 
    ["000001", "0.25", "0.25"], 
    ["000010", "0.50", "0.5"], 
    ["000011", "0.75", "0.75"], 
    ["000100", "1.00", "1"], 
    ["000101", "1.25", "1.25"], 
    ["000110", "1.50", "1.5"], 
    ["000111", "1.75", "1.75"], 
    ["001000", "2.00", "2"], 
    ["001001", "2.25", "2.5"], 
    ["001010", "2.50", "3"], 
    ["001011", "2.75", "3.5"], 
    ["001100", "3.00", "4"], 
    ["001101", "3.25", "5"], 
    ["001110", "3.50", "6"], 
    ["001111", "3.75", "7"], 
    ["010000", "4.00", "8"], 
    ["010001", "4.25", "10"], 
    ["010010", "4.50", "12"], 
    ["010011", "4.75", "14"], 
    ["010100", "5.00", "16"], 
    ["010101", "5.25", "20"], 
    ["010110", "5.50", "24"], 
    ["010111", "5.75", "28"], 
    ["011000", "6.00", "32"], 
    ["011001", "6.25", "40"], 
    ["011010", "6.50", "48"],     
    ["011011", "6.75", "56"], 
    ["011100", "7.00", "positive infinite"], 
    ["011101", "7.25", "not a number"], 
    ["011110", "7.50", "not a number"], 
    ["011111", "7.75", "not a number"],
    ["100000", "-8.00", "-0"],     
    ["100001", "-7.75", "-0.25"], 
    ["100010", "-7.50", "-0.5"], 
    ["100011", "-7.25", "-0.75"], 
    ["100100", "-7.00", "-1"], 
    ["100101", "-6.75", "-1.25"], 
    ["100110", "-6.50", "-1.5"], 
    ["100111", "-6.25", "-1.75"], 
    ["101000", "-6.00", "-2"], 
    ["101001", "-5.75", "-2.5"], 
    ["101010", "-5.50", "-3"], 
    ["101011", "-5.25", "-3.5"], 
    ["101100", "-5.00", "-4"], 
    ["101101", "-4.75", "-5"], 
    ["101110", "-4.50", "-6"], 
    ["101111", "-4.25", "-7"], 
    ["110000", "-4.00", "-8"], 
    ["110001", "-3.75", "-10"], 
    ["110010", "-3.50", "-12"], 
    ["110011", "-3.25", "-14"], 
    ["110100", "-3.00", "-16"], 
    ["110101", "-2.75", "-20"], 
    ["110110", "-2.50", "-24"], 
    ["110111", "-2.25", "-28"], 
    ["111000", "-2.00", "-32"], 
    ["111001", "-1.75", "-40"], 
    ["111010", "-1.50", "-48"],     
    ["111011", "-1.25", "-56"], 
    ["111100", "-1.00", "negative infinite"], 
    ["111101", "-0.75", "not a number"], 
    ["111110", "-0.50", "not a number"], 
    ["111111", "-0.25", "not a number"] 
];

function fill_all_numbers_table() {
    var all_numbers_table = document.getElementById("all_numbers_table");
    all_numbers_table.innerHTML += "<tr><th>Binary</th><th>Fixed point</th><th>Floating point</th></tr>";
    for(var i = 0; i < all_6_bit_numbers.length; ++i) {
        all_numbers_table.innerHTML += "<tr><td>" + all_6_bit_numbers[i][0] + "</td><td>" + all_6_bit_numbers[i][1] + "</td><td>" + all_6_bit_numbers[i][2] + "</td></tr>";  
    }
}

// "calculator"
var number_as_string = "0";

function in_6_bit(fpn) {
    if(isNaN(fpn))
        return NaN;
    var min_diff = Number.MAX_VALUE;
    var best_i = 0;
    for(var i = 0; i < 28; ++i) {
        const in_table = parseFloat(all_6_bit_numbers[i][2]);
        const diff = Math.abs((Math.abs(fpn) - in_table));
        if(diff < min_diff){
            min_diff = diff;
            best_i = i;
        }
    }
    return parseFloat(all_6_bit_numbers[best_i][2]) * Math.sign(fpn);
}

var instrumental_error = NaN;
function instrumental_error_fill() {
    var text1 = document.getElementById("number_as_string");
    var text2 = document.getElementById("number_in_6_bit");
    var text3 = document.getElementById("error_in_6_bit");

    text1.value = number_as_string;

    var fpn = parseFloat(number_as_string);
    if(!isNaN(fpn)) {
        const fpn_6_bit = in_6_bit(fpn);
        text2.value = fpn_6_bit;
        const number_len = number_as_string.split('.').length < 2 ? 0 : number_as_string.split('.')[1].length;
        const another_number_len = fpn_6_bit.toString().split('.').length < 2 ? 0 : fpn_6_bit.toString().split('.')[1].length;
        const real_number_len = another_number_len > number_len ? another_number_len : number_len;
        text3.value = Math.abs(fpn - fpn_6_bit).toFixed(real_number_len);
        instrumental_error = text3.value;
    } else {
        text2.value = "NaN";
        text3.value = "?";
    }
}


function number_clear() {
    number_as_string = "0";
    instrumental_error_fill();
}

function number_backspace() {
    number_as_string = number_as_string.substr(0, number_as_string.length - 1);
    if(number_as_string.length > 0 && number_as_string[number_as_string.length-1] == '.')   // floating point
        number_as_string = number_as_string.substr(0, number_as_string.length - 1);
    if(number_as_string == "-" || number_as_string.length == 0)
        number_as_string = "0";
    instrumental_error_fill();
}

function number_add(digit) {
    if(number_as_string == "0")
        number_as_string = digit;
    else if(number_as_string == "-0")
        number_as_string = "-" + digit;
    else
        number_as_string += digit;
    instrumental_error_fill();
}

function number_invert_sign() {
    if(number_as_string.length == 0)
        return;
    if(number_as_string[0] == '-')
        number_as_string = number_as_string.substr(1, number_as_string.length - 1);
    else 
        number_as_string = '-' + number_as_string;
    instrumental_error_fill();
}

function number_place_point() {
    number_as_string = number_as_string.split('.').join('') + '.';
    instrumental_error_fill();
}

// sum error
function sum_error_fill() {
    var a = document.getElementById("sum_a").value;
    var b = document.getElementById("sum_b").value;
    var result = Number(a) + Number(b);
    document.getElementById("sum_result").value = in_6_bit(result);
    document.getElementById("sum_error").value = result - in_6_bit(result);
}

/// quests
function check_instrumental_error_quest_1() {
    if(instrumental_error != "0.001"){
        document.getElementById("reply_instrumental_error_quest_1").innerHTML = "That's not exactly 0.001. Please try again.";
    } else {
        document.getElementById("reply_instrumental_error_quest_1").innerHTML = "Yes! Since 0.001 don't fit 6-bit floating point numbers, you can just add it to any number that does.";
        document.getElementById("buttons_instrumental_error_quest_1").style.display = 'none';
//        quests[3] = 1;
    }
}
    </script>
  </head>
  <body>
    <center>
    <h1>
Yet another floating point tutorial
    </h1>
    <h2>
Why though?
    </h2>
    <p>
I know, there are already excellent tutorials and explanations on the topic. To name a few,
    </p>
    <ul>
    <li>
<a href="https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>
    </li>
    <li>
<a href="http://blog.reverberate.org/2014/09/what-every-computer-programmer-should.html">Floating Point Demystified</a>
    </li>
    <li>
<a href="http://fabiensanglard.net/floating_point_visually_explained/">Floating Point Visually Explained</a>
    </li>
    <li>
Bruce Dawson's <a href="https://randomascii.wordpress.com/category/floating-point/">blog posts</a>
    </li>    
    </ul>
    <p>
I still think that reexplaining the most obscure concepts with different words (and buttons) might help someone better understand floating point numbers as the instrument. To make less bugs, to make things faster, to create better software in general.
    </p>
    <p>
So here we are.
    </p>

    <h2>
6-bit integer number
    </h2>
    <p>
Floating point numbers were invented to represent real numbers. Like 0.5 or 3.1415926. The ones that can't be represented by integers like 1 or 3. But in fact, computers only have integers.
    </p>
    <p>
Computers operate with bit tuples, and there are only as many different compinations of bits as 2<sup>n</sup> where <i>n</i> is the length of a tuple.
    </p>    
    <p>
Here's a model of a 6-bit integer number. 
    </p>
    <canvas id="integer" width=640 height=200></canvas>
    <script language="JavaScript">
        init_integer();
    </script>
    <p class="comment">
The number buttons are clickable.
    </p>
    <p>
Integer numbers are not universally standartized but there are some common conventions. For instance, the most common way to represent negative integers is by using the higher half of the range.
    </p>
    <p>
Bitwise, it looks a little odd, but it all makes perfect sense when we see all the range in one picture. 
    </p>
    <table>
    <tr><td><b>Unsigned 1-digit decimal</b></td><td><b>Signed 1-digit decimal<b></td></tr>
    <tr><td>0</td><td>0</td></tr>
    <tr><td>1</td><td>1</td></tr>
    <tr><td>2</td><td>2</td></tr>
    <tr><td>3</td><td>3</td></tr>
    <tr><td>4</td><td>4</td></tr>
    <tr><td>5</td><td>-5</td></tr>
    <tr><td>6</td><td>-4</td></tr>
    <tr><td>7</td><td>-3</td></tr>
    <tr><td>8</td><td>-2</td></tr>
    <tr><td>9</td><td>-1</td></tr>
    </table>
    <p>
The first half of the range is shared between signed and unsigned types. Then there's a leap back for the signed ones. Then they diverge by exactly half a range.
    </p>
    <p>
If you take overflows into consideration, it seems even more natural. Yes, signed numbers overflow at half-range, but unsigned numbers overflow too, only half a range later. It's like two continuous rolls of numbers going along each other.
    </p>
    <table>
    <tr><td><b>Unsigned 1-digit decimal</b></td><td><b>Signed 1-digit decimal<b></td></tr>
    <tr><td>...</td><td>...</td></tr>    
    <tr><td>9</td><td>-1</td></tr>    
    <tr><td><span class="colored1">0</span></td><td>0</td></tr>
    <tr><td><span class="colored1">1</span></td><td>1</td></tr>
    <tr><td><span class="colored1">2</span></td><td>2</td></tr>
    <tr><td><span class="colored1">3</span></td><td>3</td></tr>
    <tr><td><span class="colored1">4</span></td><td>4</td></tr>
    <tr><td><span class="colored1">5</span></td><td><span class="colored2">-5</span></td></tr>
    <tr><td><span class="colored1">6</span></td><td><span class="colored2">-4</span></td></tr>
    <tr><td><span class="colored1">7</span></td><td><span class="colored2">-3</span></td></tr>
    <tr><td><span class="colored1">8</span></td><td><span class="colored2">-2</span></td></tr>
    <tr><td><span class="colored1">9</span></td><td><span class="colored2">-1</span></td></tr>
    <tr><td>0</td><td><span class="colored2">0</span></td></tr>
    <tr><td>1</td><td><span class="colored2">1</span></td></tr>
    <tr><td>2</td><td><span class="colored2">2</span></td></tr>
    <tr><td>3</td><td><span class="colored2">3</span></td></tr>
    <tr><td>4</td><td><span class="colored2">4</span></td></tr>
    <tr><td>5</td><td>-5</td></tr>
    <tr><td>...</td><td>...</td></tr>
    </table>    

    <p>
Please don't write your code expecting this behavior though. Integer overflows are not universally standartized. And even when they are, you'd be better off not exploiting them because it makes code obscure, error prone, and often non-portable.
    </p>

    <table>
    <tr>
    <td style="border: 1px solid black;">
    <pre>
  uint16_t a = 50'000;
  uint16_t b = 50'000;
  uint64_t c = a*b;
  std::cout &lt;&lt; c &lt;&lt; "\n";</pre>
    </td>
    </tr>
    </table>

    <p>
18446744071914584320
    </p>
    
    <p>
Integer numbers may still be used to represent non-integer values. For instance, 0.45 of a meter is 45 centimeters. 45.6 centimeters is 456 millimeters, and so on.
    </p>
    <p class="formula">    
    <br>    
456 mm = 45.6 cm = 0.456 m
    <br><br>
    </p>
    <p>
It's just a matter of representation. It's all about where to put the decimal point.
    </p>
    <p>
When we can agree on where to put the decimal point, we can turn integers into fixed point numbers.
    </p>

    <h2>
6-bit fixed point number
    </h2>
    <p>
With things like a price tag or body temperature, we know where the point goes. These things can be written as integers but manipulated with the decimal point in mind.
    </p>
    <p class="formula">
    <br>
    $ <b>9.<sup>99</sup></b>
    <br><br>
    <b>36.6&deg;C</b>
    <br><br>
    </p>
    <canvas id="fixed" width=640 height=200></canvas>
    <script language="JavaScript">
        init_fixed();
    </script>    
    <p>
You can add and subtract them like the regular numbers, but you have to introduce more elaborate rules for division and multiplication. And you have to watch for overflows and underflows accordingly.
    </p>

    <h2>
6-bit floating point number
    </h2>
    <p>
Flosting point numbers are that popular, because you can use them even if you don't know where the decimal point should be or where is will appear after the computation. 
    </p>
    <p>
They come from scientific (AKA exponential) notation. With this notation, you can write down both astronomical and subatomic values.
    </p>
    <p class="formula">
    <br>
    m<sub>Sun</sub>: <b>1.989e+30</b> kg 
    <br><br>
    m<sub>e</sub>: <b>9.1093897e-31</b> kg 
    <br><br>
    </p>
    <p>
Just like the numbers in scientific notation, a floating point number has a sign, some meaningful digits, and the exponent. The three major differences are: 
    </p>
    <ol>
    <li>
it's all binary not decimal; 
    </li>
    <li>
the exponent value goes before meaningful digits; 
    </li>
    <li>
and since its binary, and all the numbers except 0 start from 1, you don't have to write down the first 1 most of the time. It will appear there implicitly.
    </li>
    </ol>
    </p>
    <canvas id="floating" width=640 height=200></canvas>
    <script language="JavaScript">
        init_floating();
    </script>    
    <p>
Since you're still working with bits, and every number is still just an integer in disguise, you can imagine a floating point number as an integer number of different powers of 2.
    </p>
    <p>
Unlike integer numbers, floating point numbers are standartized, and the standard specifies several useful conventions. The whole range of possible bits consists not only of numbers, but of two distinct zeroes, two values for infinitely large values, and a whole subrange of "not a number"s.
    </p>
    <br><br>
    
    <table id="all_numbers_table">
    </table>
    <script language="JavaScript">
        fill_all_numbers_table();
    </script> 
    <p>
To understand why do you need special values for infinite numbers, you need to understand floating point zeroes first. They are not actual zeroes. They model anything that is absolutely smaller than the least representable number. Of course, the may represent actual zero, but they may be just some real small numbers, and as such they deserve to retatin their signs.
    </p>
    <table>
    <tr>
    <td style="border: 1px solid black;">
    <pre>
  auto min_float = std::numeric_limits<float>::denorm_min();  
  std::cout &lt;&lt; min_float;  
  > 1.4013e-45


  std::cout &lt;&lt; min_float / 2.f;
  > 0

  
  std::cout &lt;&lt; -min_float / 2.f;  
  > -0


  std::cout &lt;&lt; 0 - (min_float / 2.f);
  > 0


  std::cout &lt;&lt; (min_float / 2.f) * 2.f;
  > 0
    </pre>
    </td>
    </tr>
    </table>
    <p>
When you divide a non-zero number by a zero, you get an infinite. And just like zeroes are not zeroes, these are not inifinites. These are just numbers that are too big to be represented.
    </p>
    <p>
There are also numbers that can't be represented in this model, line the square root of negative numbers. Technically, they are still numbers, but being complex numbers and not real, they don't have the representation. Operations like this return "not a number" then.
    </p>
    
    <h2>
    Instrumental error
    </h2>
    <form>
    <table>
    <tr>
    <td align="right">
    <button type="button" id="button_clear" onclick="number_clear();" >C</button>
    <button type="button" id="button_backspace" onclick="number_backspace();">&larr;</button>
    <button type="button" id="button_7" onclick="number_add('7');">7</button>
    <button type="button" id="button_8" onclick="number_add('8');">8</button>
    <button type="button" id="button_9" onclick="number_add('9');">9</button>
    <br>
    <button type="button" id="button_4" onclick="number_add('4');">4</button>
    <button type="button" id="button_5" onclick="number_add('5');">5</button>
    <button type="button" id="button_6" onclick="number_add('6');">6</button>
    <br>
    <button type="button" id="button_1" onclick="number_add('1');">1</button>
    <button type="button" id="button_2" onclick="number_add('2');">2</button>
    <button type="button" id="button_3" onclick="number_add('3');">3</button>
    <br>
    <button type="button" id="button_minus" onclick="number_invert_sign();">-</button>
    <button type="button" id="button_0" onclick="number_add('0');">0</button>
    <button type="button" id="button_dot" onclick="number_place_point();">.</button>
    </td>
    <td align="right">
    <label for="number_as_string">Input number: </label><input type="text" id="number_as_string" value="0"><br>
    <label for="number_in_6_bit">As 6-bit FP: </label><input type="text" id="number_in_6_bit" value="0"><br>
    <label for="error_in_6_bit">Instrumental error: </label><input type="text" id="error_in_6_bit" value="0"><br>    
    </td>
    </tr>
    </table>    
    </form>
    
    <script language="JavaScript">
        instrumental_error_fill();
    </script>
    <p>
...
    </p>
    <form>
        <b>Quest n.</b> Using the thing above, enter a number with exactly 0.001 error.
        <div id="reply_instrumental_error_quest_1" style="padding-top:6pt;"></div>
        <div id="buttons_instrumental_error_quest_1" style="text-align:right;">
            <button type="button" id="button_instrumental_error_quest_1" onclick="check_instrumental_error_quest_1()" style="width: 108pt;">Check!</button>
        </div>
    </form>
    <p>
...
    </p>
    
    <h2>
    Computational error
    </h2>
    <form>    
    <select id="sum_a" onchange="sum_error_fill()">
        <option value="0.25">0.25</option>
        <option value="0.5">0.5</option>
        <option value="2">2</option>
        <option value="16">16</option>
    </select>
+
    <select id="sum_b" onchange="sum_error_fill()">
        <option value="0.25">0.25</option>
        <option value="0.5">0.5</option>
        <option value="2">2</option>
        <option value="16">16</option>
    </select>
    <label for="sum_result"> = </label><input type="text" id="sum_result" value="0.5">
    <label for="sum_error">, error: </label><input type="text" id="sum_error" value="0">
    </form> 
    <script language="JavaScript">
        sum_error_fill();
    </script>         

    <table class="footer" style="width: 555pt; padding: 64pt 0pt 32pt 0pt; background-color: transparent; font-family: sans-serif; font-size: 16pt; font-style: normal;">
    <tr>
    <td class="footer" style="vertical-align: middle; text-align: left; width: 64px; padding: 0; margin: 0; border: 0;">
        <a href="index.html"><img src="favicon.ico"></a>
    </td>
    <td class="footer" style="vertical-align: middle; text-align: left; width: 200pt; padding: 0; margin: 0; border: 0;">
        &nbsp;&larr; there's more.
    </td>
    <td class="footer" style="vertical-align: middle; text-align: right; width: 300pt; padding: 0; margin: 0; border: 0;">
        +
        <a href="https://github.com/akalenuk/wordsandbuttons">Github</a> &
        <a href="https://twitter.com/wordsandbuttons">Twitter</a> &
        <a href="https://news.ycombinator.com/from?site=wordsandbuttons.online">Hacker News</a>
    </td>
    </tr>
    </table>
    </center>
  </body>
</html>
