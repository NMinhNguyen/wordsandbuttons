<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Logic programming in C++</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <style>
body{
    margin: 0 0 0 0;
}

a{
    text-decoration: none;
}

h1 {
    padding-top: 32pt;
    font-size: 24pt;
    width: 600pt;
    text-align: left;
}

h2 {
    padding-top: 16pt;
    font-size: 20pt;
    width: 555pt;
    text-align: left;
}

p {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
}

pre {
    margin: 0 0 0 0;
    padding-top: 12pt;
    padding-left: 12pt;
    padding-right: 12pt;
    padding-bottom: 12pt;
    font-size: 12pt;
    text-align: left;
    width: 300pt;
}

.code_piece {
    font-family: monospace;
    padding-left: 4pt;
    padding-right: 4pt;
}


table {
    border-width: 0pt;
}

td {
    vertical-align: top;
    padding: 6pt 12pt 6pt 12pt;
    font-size: 16pt;
    border: 1px solid black;
    width: 600pt;
}

button{
    width: 248pt;
    height: 42pt;
    margin-left:4pt;
    margin-right:4pt;
    font-size: 16pt;
}

u {
    border-bottom: 1px dotted #000;
    text-decoration: none;
    cursor: pointer;
}

ul {
    padding-left: 0pt;
    list-style-type: circle;
}

li {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
    padding-bottom: 12pt;
}
    </style>
    <script language="JavaScript">
function show(n){
    document.getElementById("shown_" + n).style.display = "none";
    document.getElementById("hidden_" + n).style.display = "inline";
}
    </script>
  </head>
  <body>
    <center>
    <h1>
Logic programming in C++
    </h1>
    <p>
It is well known that C++ is a multi-paradigm programming language. It combines procedural, functional, object-oriented, and generic programming features in the arsenal of things to shoot your foot with.
    </p>
    <p>
Little less known that it also employs logic programming, although, it doesn't expose its features directly. Still, understanding the paradigm while not enreaching your arsenal per se makes you much less prone to metaphorical self-injuries.
    </p>
    
    <h2>
What's logic programming?
    </h2>
    <p>
Logic programming is about letting the computer deduce facts for you. You write down the things you know, write down the rules that hold true for these things, and then you ask the question. Like “who killed John F. Kennedy”? 
    </p>
    <p>
Of course, the computer can only juggle the facts you feed it with. It doesn't do surveillance or interrogation for you. It doesn't have the intuition. But it does the deduction itself fast and robust, that's all we can expect from the machine.
    </p>
    <p>
The most popular logic programming language is Prolog. It was invented in France and its name actually stands for “programmation en logique”, which is in itself quite logical.
    </p>
    <p>
Let's take a quick toor in Prolog to see what we can learn from it.
    </p>
    <p>
In Prolog you have <b>terms</b> to store data, which can be of several types:    
    </p>
    <ul>
    <li><b>atom</b> — basically any word or even a full sentence. Like: <i>x</i>, <i>alice</i>, or <i>‘year 2016’</i>.</li>
    <li><b>number</b> — floating point or integer.</li>
    <li><b>compound term</b> — complex data type constructed of atoms and numbers. This includes lists and strings.</li> 
    </ul>
    <p>
You build relations between data with rules and facts. When you want to say that “<i>Alice <b>likes</b> Bob</i>”, <i>Alice</i> and <i>Bob</i> are data and <i><b>likes</b></i> is a relation. In Prolog you can set this relation like this:
    </p>
    <table><tr>
    <td>
    <pre>
<b>likes</b>(alice, bob).
    </pre>
    </td>
    </td></tr></table>
    <p>
In Prolog such relations are called <b>facts</b>. There are also <b>rules</b> which are conditional facts. Let’s say Alice likes someone who is kind, and intelligent, and writes in C++. The rule for that would be:
    </p>
    <table><tr>
    <td>
    <pre>
<b>likes</b>(alice, <i>Person</i>) :-
  <b>kind</b>(<i>Person</i>),
  <b>intelligent</b>(<i>Person</i>),
  <b>writes</b>(<i>Person</i>, cpp).
    </pre>
    </td>
    </td></tr></table>
    <p>
A <i>Person</i> is a Prolog <b>variable</b>. Syntaxically, variables always begin with a capital letter. Semantically, they can be any term that fits the conditions. 
    </p>
    <p>
Logic programming is all about deduction. You have a set of terms, known facts and rules. Then you want to know something you didn’t knew before. For instance, if we want to know if Alice likes Bob according to her rule above, we have to introduce Bob with a set of facts and then ask Prolog like this:
    </p>
    <table><tr>
    <td>
    <pre>
?- <b>likes</b>(alice, bob).    
    </pre>
    </td>
    </td></tr></table>
    <p>
Prolog programming is declarative. This means that we only have to give it rules and facts, but not the way the facts and rules should be checked. Prolog finds the way for us. 
    </p>
    <p>
So, given the following set of facts, does Alice like Bob or not?
    </p>
    <table><tr>
    <td>
    <pre>
<b>kind</b>(bob).
<b>kind</b>(george).
<b>kind</b>(steven).
<b>intelligent</b>(bob).
<b>intelligent</b>(steven).
<b>writes</b>(bob, cpp).
<b>writes</b>(bob, assembly).
<b>writes</b>(george, cpp).
<b>writes</b>(steven, prolog). 

<b>likes</b>(alice, <i>Person</i>) :-
  <b>kind</b>(<i>Person</i>),
  <b>intelligent</b>(<i>Person</i>),
  <b>writes</b>(<i>Person</i>, cpp).
  
?- <b>likes</b>(alice, bob).   
    </pre>
    </td>
    </td></tr></table>
    <div id="shown_prolog">
        <button type="button" onclick="show('prolog')">Yes</button>
        <button type="button" onclick="show('prolog')">No</button>
    </div>
    <div id="hidden_prolog" style="display:none;">
        <p>
Yes she does. Bob is kind, intelligent and writes in C++. According to our facts and rules, Alice likes him. 
        </p>
    </div>
    
    <h2>
Analogies in C++
    </h2>
    <p>
C++ doesn't have facts deduction as a language feature. But it has something similar. It is type deduction. Now let's translate our Prolog programm into C++.
    </p>
    <p>
Classes will be our atoms.
    </p>
    <p>
Polymorphic functions will be our facts.
    </p>
    <p>
And a template function will be the rule.
    </p>
    <table><tr>
    <td>
    <pre>
<b>// people</b>
class Alice{};
class Bob{};
class George{};
class Steven{};

<b>// languages</b>
class Cpp{};
class Prolog{};
class Assembly{};

<b>// facts</b>
void kind(Bob);
void kind(George);
void kind(Steven);
void intelligent(Bob);
void intelligent(Steven);
void writes(Bob, Cpp);
void writes(Bob, Assembly);
void writes(George, Cpp);
void writes(Steven, Prolog);

<b>// the rule</b>
template <typename Person> void likes(Alice, Person person)
{
    kind(person);
    intelligent(person);
    writes(person, Cpp());
}

<b>// check the rule for Bob</b>
int main()
{
    likes(Alice(), Bob());
}
    </pre>
    </td>
    </td></tr></table>
    <p>
Type dedcuction is not entirely the same as logic programming, but in many regards it works the same. If the program compiles then the compiler could deduce all the types.
    </p>
    <p>
So does Alice like Bob in C++?
    </p>
    <div id="shown_cpp">
        <button type="button" onclick="show('cpp')">Yes</button>
        <button type="button" onclick="show('cpp')">No</button>
    </div>
    <div id="hidden_cpp" style="display:none;">
        <p>
Yes she still does. The program compiles only if there is a compilable <i>likes</i> function for <i>Alice</i> and <i>Bob</i>. And our only defined <i>likes</i> is only compilable for <i>Bob</i> if there are compilable <i>kind</i>, <i>intelligent</i>, and <i>writes Cpp</i> functions for him. And there are.
        </p>
    </div>
    
    <h2>
Logic programming v.s. type deduction
    </h2>
    <p>
...
    </p>
    
       
    <table><tr>
    <td>
    <pre>
...
    </pre>
    </td>
    </td></tr></table>
    <p>
    <div id="shown_1">
        <button type="button" onclick="show(1)">Yes</button>
        <button type="button" onclick="show(1)">No</button>
    </div>
    <div id="hidden_1" style="display:none;">
        <p>
...
        </p>
    </div>

    <p>
...    
    </p>


    <table class="footer" style="width: 555pt; padding: 64pt 0pt 32pt 0pt; background-color: transparent; font-family: sans-serif; font-size: 16pt; font-style: normal;">
    <tr>
    <td class="footer" style="vertical-align: middle; text-align: left; width: 64px; padding: 0; margin: 0; border: 0;">
        <a href="index.html"><img src="favicon.ico"></a> 
    </td>
    <td class="footer" style="vertical-align: middle; text-align: left; width: 200pt; padding: 0; margin: 0; border: 0;">
        &nbsp;&larr; there's more.
    </td>
    <td class="footer" style="vertical-align: middle; text-align: right; width: 300pt; padding: 0; margin: 0; border: 0;">
        + 
        <a href="https://github.com/akalenuk/wordsandbuttons">Github</a> & 
        <a href="https://twitter.com/wordsandbuttons">Twitter</a> & 
        <a href="https://news.ycombinator.com/from?site=wordsandbuttons.online">Hacker News</a>
    </td>
    </tr>
    </table>
    </center>
  </body>
</html>
