<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>How much math can you do in 10 lines of Python</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <style>
body{
    margin: 0 0 0 0;
}

a{
    text-decoration: none;
}

h1 {
    padding-top: 32pt;
    font-size: 24pt;
    width: 600pt;
    text-align: left;
}

h2 {
    padding-top: 16pt;
    font-size: 20pt;
    width: 555pt;
    text-align: left;
}

p {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
}

.footer {
    margin-top: 64pt;
    padding-bottom: 32pt;
    font-family: sans-serif;
    font-size: 14pt;
    text-align: left;
}

pre {
    margin: 0 0 0 0;
    padding-top: 12pt;
    padding-left: 12pt;
    padding-right: 12pt;
    padding-bottom: 12pt;
    font-size: 12pt;
    text-align: left;
    width: 300pt;
}

.code_piece {
    font-family: monospace;
    padding-left: 4pt;
    padding-right: 4pt;
}

table {
    border-width: 0pt;
}

td {
    vertical-align: top;
    padding: 6pt 12pt 6pt 12pt;
    font-size: 16pt;
    border: 1px solid black;
    width: 505pt;
}

button{
    width: 248pt;
    height: 42pt;
    margin-left:4pt;
    margin-right:4pt;
    font-size: 16pt;
}

li {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
    padding-bottom: 6pt;
}

u {
    border-bottom: 1px dotted #000;
    text-decoration: none;
    cursor: pointer;
}
    </style>
    <script language="JavaScript">
function next(slides){
    var first_slide = document.getElementById(slides + "_" + 1);
    for(var i = 1; i < 19; ++i)
    {
        var this_slide = document.getElementById(slides + "_" + i);
        var next_slide = document.getElementById(slides + "_" + (i+1));
        if(this_slide)
            if(this_slide.style.display == "block")
                {
                this_slide.style.display = "none";
                if(next_slide)
                    next_slide.style.display = "block";
                else
                    first_slide.style.display = "block";
                return;
                }
    }
}
    </script>
  </head>
  <body>
    <center>
    <h1>
How much math can you do in 10 lines of Python
    </h1>
    <p>
This article is supposed to show you how powerful Python is in its core. To illustrate this I chose the domain of linear algebra. Of course, Python has very decent libraries for it so you probably wouldn't have to implement any of the things described here. However, I only chose linear algebra due to my lack of imagination. The syntax that allows us to put so much sense in so little code is universal.
    </p>
    <p>
<i>Disclaimer: for the sake of readability not all the code samples are actually written in a single line each. It is, of course, possible since neither of them contain Python control structures that rely on indentation. All the indentation in the examples is entirely voluntaristic. It only serves people, and not the language.</i>
    </p>

    <h2>
1. List comprehensions
    </h2>
    <p>
...    
    </p>
    <table><tr>
    <td>
    <pre>
def scaled(A, x): return <b>[</b>ai*x <b>for</b> ai <b>in</b> A<b>]</b>
    </pre>
    </td>
    </td></tr></table>
    
    <table><tr>
    <td>
    <pre><span id="scale_1" style="display:block"><span style="color:#994466"><b>List comprehension</b></span>
    
    [1.0, 4.0, 3.0]
* 2.0
    [, ...
    </span><span id="scale_2" style="display:none"><span style="color:#aa2244"><b>Step 1</b></span>
    
    [<b>1.0</b>, 4.0, 3.0]
     * 2.0
    [<b>2.0</b>, ...
    </span><span id="scale_3" style="display:none"><span style="color:#aa2244"><b>Step 2</b></span>
    
    [1.0, <b>4.0</b>, 3.0]
          * 2.0
    [2.0, <b>8.0</b>, ...
    </span><span id="scale_4" style="display:none"><span style="color:#aa2244"><b>Step 3</b></span>
    
    [1.0, 4.0, <b>3.0</b>]
               * 2.0
    [2.0, 8.0, <b>6.0</b>]
    </span></pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('scale')">Next step</button>
    </p>
    <p>
... 
    </p>
    <table><tr>
    <td>
    <pre>
>>> [2*v for v in [1.0, 2.0, 3.0]]
[2.0, 4.0, 6.0]  
    
>>> {k:2*v for k, v in {0:1.0, 1:4.0, 2:3.0}.items()}
{0: 2.0, 1: 8.0, 2: 6.0}

>>> tuple(2*v for v in (1.0, 4.0, 3.0))
(2.0, 8.0, 6.0)
    </pre>
    </td>
    </td></tr></table>    
    
    <h2>
2. List zipping
    </h2>
    <table><tr>
    <td>
    <pre>
def sum_of(A, B): return [ai+bi for <b>(ai, bi)</b> in <b>zip</b>(A, B)]
    </pre>
    </td>
    </td></tr></table>
    
    <table><tr>
    <td>
    <pre><span id="sum_1" style="display:block"><span style="color:#994466"><b>List zipping</b></span>
    
    A = [1.0, 4.0, 3.0]
    B = [7.0, 3.0, 1.0]
zip(A, B) = [...
    </span><span id="sum_2" style="display:none"><span style="color:#aa2244"><b>Step 1</b></span>
    
         A = [<b>1.0</b>, 4.0, 3.0]
         B = [<b>7.0</b>, 3.0, 1.0]
zip(A, B) = [<b>(1.0, 7.0)</b>, ...
    </span><span id="sum_3" style="display:none"><span style="color:#aa2244"><b>Step 2</b></span>
    
                A = [1.0, <b>4.0</b>, 3.0]
                B = [7.0, <b>3.0</b>, 1.0]
zip(A, B) = [(1.0, 7.0), <b>(4.0, 3.0)</b>, ...
    </span><span id="sum_4" style="display:none"><span style="color:#aa2244"><b>Step 3</b></span>
    
                       A = [1.0, 4.0, <b>3.0</b>]
                       B = [7.0, 3.0, <b>1.0</b>]
zip(A, B) = [(1.0, 7.0), (4.0, 3.0), <b>(3.0, 1.0)</b>]
    </span></pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('sum')">Next step</button>
    </p>  
    <p>
... 
    </p>
    
    <h2>
3. Sum function
    </h2>
    <table><tr>
    <td>
    <pre>
def dot_of(A, B): return <b>sum</b>([ai*bi for (ai, bi) in zip(A, B)])
    </pre>
    </td>
    </td></tr></table>
    <p>
... 
    </p>
    <table><tr>
    <td>
    <pre>
>>> [0.1]*10
[0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1]

>>> sum([0.1]*10)
0.9999999999999999

>>> import math
>>> math.fsum([0.1]*10)
1.0
    </pre>
    </td>
    </td></tr></table> 
    
    <h2>
4. Conditional expressions
    </h2>
    <table><tr>
    <td>
    <pre>
def identity(n): 
    return [[1.0 <b>if</b> i==j <b>else</b> 0.0 
            for j in range(n)] 
        for i in range(n)]
    </pre>
    </td>
    </td></tr></table>
    
    <table><tr>
    <td>
    <pre><span id="identity_1" style="display:block"><span style="color:#994466"><b>Conditional expression: 0 == 0</b></span>
    
  <b>j = 0</b>
[[<b>1.0</b>, ...            <b>i = 0</b>


    </span><span id="identity_2" style="display:none"><span style="color:#aa2244"><b>Conditional expression: 1 != 0</b></span>
    
       j = 1
[[<b>1.0</b>, 0.0, ...       i = 0


    </span><span id="identity_3" style="display:none"><span style="color:#aa2244"><b>Conditional expression: 2 != 0</b></span>
    
            j = 2
[[<b>1.0</b>, 0.0, 0.0], ... i = 0


    </span><span id="identity_4" style="display:none"><span style="color:#aa2244"><b>Conditional expression: 0 != 1</b></span>
    
  j = 0
[[<b>1.0</b>, 0.0, 0.0], 
 [0.0, ...            i = 1

    </span><span id="identity_5" style="display:none"><span style="color:#aa2244"><b>Conditional expression: 1 == 1</b></span>
    
       <b>j = 1</b>
[[<b>1.0</b>, 0.0, 0.0], 
 [0.0, <b>1.0</b>, ...       <b>i = 1</b>
 
    </span><span id="identity_6" style="display:none"><span style="color:#aa2244"><b>Conditional expression: 2 != 1</b></span>
    
            j = 2
[[<b>1.0</b>, 0.0, 0.0], 
 [0.0, <b>1.0</b>, 0.0], ... i = 1
 
    </span><span id="identity_7" style="display:none"><span style="color:#aa2244"><b>Conditional expression: 0 != 2</b></span>
    
  j = 0
[[<b>1.0</b>, 0.0, 0.0], 
 [0.0, <b>1.0</b>, 0.0], 
 [0.0, ...            i = 2
    </span><span id="identity_8" style="display:none"><span style="color:#aa2244"><b>Conditional expression: 1 != 2</b></span>
    
       j = 1
[[<b>1.0</b>, 0.0, 0.0], 
 [0.0, <b>1.0</b>, 0.0], 
 [0.0, 0.0, ...       i = 2
    </span><span id="identity_9" style="display:none"><span style="color:#aa2244"><b>Conditional expression: 2 == 2</b></span>
    
            <b>j = 2</b>
[[<b>1.0</b>, 0.0, 0.0], 
 [0.0, <b>1.0</b>, 0.0], 
 [0.0, 0.0, <b>1.0</b>]]     <b>i = 2</b>
    </span></pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('identity')">Next step</button>
    </p>
    <table><tr>
    <td>
    <pre>
def identity(n): 
    return [[1.0 <b>if</b> i==j <b>else</b> (0.0, 
                               sys.stdout.write("i != j\n")
                              )[0]
            for j in range(n)] 
        for i in range(n)]
    </pre>
    </td>
    </td></tr></table>
    <p>
... 
    </p>
    
    <h2>
5. Passing container's content as arguments
    </h2>
    <table><tr>
    <td>
    <pre>
def transposed(A): return [list(aj) for aj in <b>zip(*A)</b>]
    </pre>
    </td>
    </td></tr></table>
    <table><tr>
    <td>
    <pre><span id="transpose_1" style="display:block"><span style="color:#994466"><b>Pasing a container</b></span>
    
>>> A = [[1, 2, 3],
...      [4, 5, 6],
...      [7, 8, 9]]
     
>>> def print_A(A):
...     print A

>>> print_A(A)

[[1, 2, 3], [4, 5, 6], [7, 8, 9]]
    </span><span id="transpose_2" style="display:none"><span style="color:#aa2244"><b>Passing a container's content</b></span>
    
>>> A = [[1, 2, 3],
...      [4, 5, 6],
...      [7, 8, 9]]
     
>>> def print_a_b_c(a, b, c):
...     print a, b, c

>>> print_a_b_c(*A)

[1, 2, 3] [4, 5, 6] [7, 8, 9]
    </span><span id="transpose_3" style="display:none"><span style="color:#aa2244"><b>Using zip to transpose a matrix</b></span>
    
>>> A = [[1, 2, 3],
...      [4, 5, 6],
...      [7, 8, 9]]
     
>>> def print_zip_a_b_c(a, b, c):
...     print zip(a, b, c)

>>> print_zip_a_b_c(*A)

[(1, 4, 7), (2, 5, 8), (3, 6, 9)]
    </span></pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('transpose')">Next step</button>
    </p>
    <p>
... 
    </p>
    
    <h2>
6. Matrix multiplication
    </h2>
    <table><tr>
    <td>
    <pre>
def matrix_vector_of(A, X): return [<b>dot_of</b>(ai, X) for ai in A]
    </pre>
    </td>
    </td></tr></table>
    <p>
<a href="http://wordsandbuttons.online/interactive_guide_to_homogeneous_coordinates.html">Interactive guide to homogeneous coordinates</a>
    </p>
    <p>
... 
    </p>
    
    <h2>
7. Projection
    </h2>
    <table><tr>
    <td>
    <pre>
def projected_on(A, Pn, Pd): 
    return sum_of(A, 
        scaled(Pn, 
            (Pd — dot_of(Pn, A)) / dot_of(Pn, Pn)))
    </pre>
    </td>
    </td></tr></table>
    <p>
... 
    </p>
    
    <h2>
8. List multiplication in arguments
    </h2>
    <table><tr>
    <td>
    <pre>
def distance_between(A, B): 
    return pow(dot_of( *(sum_of(A, scaled(B, -1.0)), )<b>*2</b> ), 0.5)
    </pre>
    </td>
    </td></tr></table>
    <table><tr>
    <td>
    <pre><span id="doubling_1" style="display:block"><span style="color:#994466"><b>List concatenation</b></span>
    
>>> A = [1, 2, 3]

>>> def print_A_B(A, B):
...     print A, B

>>> print_A_B(A*2 ,[])

[1, 2, 3, 1, 2, 3] []
    </span><span id="doubling_2" style="display:none"><span style="color:#aa2244"><b>List duplication</b></span>
    
>>> A = [1, 2, 3]

>>> def print_A_B(A, B):
...     print A, B

>>> print_A_B((A,)*2, [])

([1, 2, 3], [1, 2, 3]) []
    </span><span id="doubling_3" style="display:none"><span style="color:#aa2244"><b>Passing a content of a list duplication</b></span>
    
>>> A = [1, 2, 3]

>>> def print_A_B(A, B):
...     print A, B

>>> print_A_B(*(A,)*2)

[1, 2, 3] [1, 2, 3]
    </span></pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('doubling')">Next step</button>
    </p>
    
    <h2>
9. Rotation and linear solver
    </h2>
    <p>
The solver itself is explained in another article: <a href="http://wordsandbuttons.online/interactive_introduction_to_iterative_algorithms.html">Interactive introduction to iterative algorithms</a>.
    </p>    
    
    <table><tr>
    <td>
    <pre>
def <b>solve</b>(A, B, Xi): 
    return 
        Xi if distance_between(matrix_vector_of(A, Xi), B) &lt; 1e-5 
        else 
            <b>solve</b>(A[1:] + [A[0]], <b>B[1:] + [B[0]]</b>, 
                projected_on(Xi, A[0], B[0]))
    </pre>
    </td>
    </td></tr></table>
    <table><tr>
    <td>
    <pre><span id="rotation_1" style="display:block"><span style="color:#994466"><b>Rotation: step 1</b></span>
    
>>> B = [<b>1</b>, 2, 3]
>>> print B[1:] + B[0]

[2, 3, <b>1</b>]
    </span><span id="rotation_2" style="display:none"><span style="color:#aa2244"><b>Rotation: step 2</b></span>
    
>>> B = [2, 3, <b>1</b>]
>>> print B[1:] + B[0]

[3, <b>1</b>, 2]
    </span><span id="rotation_3" style="display:none"><span style="color:#aa2244"><b>Rotation: step 3</b></span>
    
>>> B = [3, <b>1</b>, 2]
>>> print B[1:] + B[0]

[<b>1</b>, 2, 3]
    </span></pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('rotation')">Next step</button>
    </p>
    <p>
... 
    </p>
    
    <h2>
10. Matrix inversion
    </h2>
    <table><tr>
    <td>
    <pre>
def inverted(A): 
    return transpose([solve(A, ort, [0.0]*len(A)) 
        for ort in identity(len(A))])
    </pre>
    </td>
    </td></tr></table>     
    <p>
... 
    </p>


    <p class="footer">
There are more words and buttons on <a href="index.html">wordsandbuttons.online</a>.
    </p>
    </center>
  </body>
</html>
