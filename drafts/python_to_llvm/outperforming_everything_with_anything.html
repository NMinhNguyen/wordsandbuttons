<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Outperforming everything with anything</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <style>
body{
    margin: 0 0 0 0;
}

a{
    text-decoration: none;
}

h1 {
    padding-top: 32pt;
    font-size: 24pt;
    width: 600pt;
    text-align: left;
}

h2 {
    padding-top: 16pt;
    font-size: 20pt;
    width: 555pt;
    text-align: left;
}

p {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
}

.footer {
    margin-top: 64pt;
    padding-bottom: 32pt;
    font-family: sans-serif;
    font-size: 16pt;
    text-align: left;
}

pre {
    margin: 0 0 0 0;
    padding-top: 12pt;
    padding-left: 12pt;
    padding-right: 12pt;
    padding-bottom: 12pt;
    font-size: 12pt;
    text-align: left;
    width: 300pt;
}

.code_piece {
    font-family: monospace;
    padding-left: 4pt;
    padding-right: 4pt;
}


table {
    border-width: 0pt;
}

td {
    vertical-align: top;
    padding: 6pt 12pt 6pt 12pt;
    font-size: 16pt;
    border: 1px solid black;
    width: 505pt;
}

button{
    width: 248pt;
    height: 42pt;
    margin-left:4pt;
    margin-right:4pt;
    font-size: 16pt;
}

li {
    font-size: 16pt;
    width: 505pt;
    text-align: left;
    padding-bottom: 6pt;
}

u {
    border-bottom: 1px dotted #000;
    text-decoration: none;
    cursor: pointer;
}
    </style>
    <script language="JavaScript">
function next(slides){
    var first_slide = document.getElementById(slides + "_" + 1);
    for(var i = 1; i < 9; ++i)
    {
        var this_slide = document.getElementById(slides + "_" + i);
        var next_slide = document.getElementById(slides + "_" + (i+1));
        if(this_slide)
            if(this_slide.style.display == "block")
                {
                this_slide.style.display = "none";
                if(next_slide)
                    next_slide.style.display = "block";
                else
                    first_slide.style.display = "block";
                return;
                }
    }
}

function draw_results(){
    var d = document.getElementById("results");
    var d_context = d.getContext("2d");
    d_context.font = "16px sans-serif";
    // background
    d_context.fillStyle="#eeeeee";
	d_context.fillRect(0, 0, 700, 500);
	
	var x = 0.0;
	var y = 0.0;
	// no inlines default
	x = 0.5;
	y = 1.5;
	d_context.fillStyle="#BB0022";
	d_context.fillText("4400 NI; def.", x + 4, y + 16);
	d_context.beginPath();
	d_context.strokeStyle="#BB0022";
	d_context.moveTo(x, y);
	d_context.lineTo(x+99, y);
	d_context.lineWidth=2;
	d_context.stroke();
	d_context.closePath();
	
	// no inlines native
	x = 100.5;
	y = 499.5 - Math.floor(499 * 4000/ 4400);
	d_context.fillStyle="#BB0022";
	d_context.fillText("4000 NI; nat.", x + 4, y - 8);
	d_context.beginPath();
	d_context.strokeStyle="#BB0022";
	d_context.moveTo(x, y);
	d_context.lineTo(x+99, y);
	d_context.lineWidth=2;
	d_context.stroke();
	d_context.closePath();
	
	// forced inlines default
	x = 200.5;
	y = 499.5 - Math.floor(499 * 120 / 4400);
	d_context.fillStyle="#882200";
	d_context.fillText("120 FI; def.", x + 4, y - 8);
	d_context.beginPath();
	d_context.strokeStyle="#882200";
	d_context.moveTo(x, y);
	d_context.lineTo(x+99, y);
	d_context.lineWidth=2;
	d_context.stroke();
	d_context.closePath();
	
	// forced inlines native
	x = 300.5;
	y = 499.5 - Math.floor(499 * 62 / 4400);
	d_context.fillStyle="#882200";
	d_context.fillText("62 FI; nat.", x + 4, y - 8);
	d_context.beginPath();
	d_context.strokeStyle="#882200";
	d_context.moveTo(x, y);
	d_context.lineTo(x+99, y);
	d_context.lineWidth=2;
	d_context.stroke();
	d_context.closePath();
	
	// triangular
	x = 400.5;
	y = 499.5 - Math.floor(499 * 56 / 4400);
	d_context.fillStyle="#886600";
	d_context.fillText("56 triangular", x + 4, y - 8);
	d_context.beginPath();
	d_context.strokeStyle="#886600";
	d_context.moveTo(x, y);
	d_context.lineTo(x+99, y);
	d_context.lineWidth=2;
	d_context.stroke();
	d_context.closePath();
	
	// lapack
	x = 500.5;
	y = 499.5 - Math.floor(499 * 650 / 4400);
	d_context.fillStyle="#002288";
	d_context.fillText("650 LAPACK", x + 4, y - 8);
	d_context.beginPath();
	d_context.strokeStyle="#002288";
	d_context.moveTo(x, y);
	d_context.lineTo(x+99, y);
	d_context.lineWidth=2;
	d_context.stroke();
	d_context.closePath();
	
	// runtime
	x = 600.5;
	y = 499.5 - Math.floor(499 * 2100 / 4400);
	d_context.fillStyle="#AA0011";
	d_context.fillText("2100 rec.", x + 4, y -8);
	d_context.beginPath();
	d_context.strokeStyle="#AA0011";
	d_context.moveTo(x, y);
	d_context.lineTo(x+99, y);
	d_context.lineWidth=2;
	d_context.stroke();
	d_context.closePath();
}

function init_results(){
    draw_results();
}
    </script>
  </head>
  <body>
    <center>
    <h1>
Outperforming everything with anything
<br>
<sub>Python? Sure, why not?</sub>
    </h1>
    <p>
This a finishing piece to <a href="http://wordsandbuttons.online/outperforming_lapack_with_c_metaprogramming.html">Outperforming LAPACK with C metaprogramming</a> and <a href="http://wordsandbuttons.online/vastly_outperforming_lapack_with_cpp_metaprogramming.html"> Vastly outperforming LAPACK with C++ metaprogramming </a>. 
    </p>
    <p>
    </p>
    <h2>
...
    </h2>
    <table><tr>
    <td>
    <pre><span id="slides_recursive_1" style="display:block"><div style="color:#994466"><b>Step 1. Benchmark C source code</b></div>
1.
    </span><span id="slides_recursive_2" style="display:none"><div style="color:#992244"><b>Step 2. LLVM assembly language</b></div>
2.
    </span><span id="slides_recursive_3" style="display:none"><div style="color:#881122"><b>Step 3. LLVM after the call replacement</b></div>
3.
    </span><span id="slides_recursive_4" style="display:none"><div style="color:#881122"><b>Step 4. Native optimized assembly</b></div>
4.
    </span></pre>
    </td>
    </td></tr></table>
    <p style="text-align:right">
    <button type="button" onclick="next('slides_recursive')">Next step</button>
    </p>
    <p>
...
    </p>

    <p>
The numbers:
    </p>
    <ol>
    <li>
...
    </li>
    <li>
...
    </li>
    <li>
<b>...</b>
    </li>
    </ol>
    <canvas id="results" width=700 height=500></canvas>
    <script language="JavaScript">
    init_results();
    </script>
    <p>
...
    </p>
    <p>
...
    </p>
    <br>
    <p style="font-family: sans-serif; font-size: 14pt;">
All the measurements conducted on Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz, the code is compiled with clang version 3.8.0-2ubuntu4 and g++ 5.4.0 with -march=native -O2. The source code for the benchmark is available on <a href="https://github.com/akalenuk/wordsandbuttons/tree/master/drafts/python_to_llvm">Github</a>.
    </p>

    <p class="footer">
There are more words and buttons on <a href="index.html">wordsandbuttons.online</a>.
    </p>
    </center>
  </body>
</html>
